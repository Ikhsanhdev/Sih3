function _regenerator(){var f,t="function"==typeof Symbol?Symbol:{},a=t.iterator||"@@iterator",n=t.toStringTag||"@@toStringTag";function e(t,a,n,e){var s,l,i,r,o,c,d,m,u,a=a&&a.prototype instanceof v?a:v,a=Object.create(a.prototype);return _regeneratorDefine2(a,"_invoke",(s=t,l=n,d=e||[],m=!1,u={p:c=0,n:0,v:f,a:p,f:p.bind(f,4),d:function(t,a){return i=t,r=0,o=f,u.n=a,g}},function(t,a,n){if(1<c)throw TypeError("Generator is already running");for(m&&1===a&&p(a,n),r=a,o=n;(y=r<2?f:o)||!m;){i||(r?r<3?(1<r&&(u.n=-1),p(r,o)):u.n=o:u.v=o);try{if(c=2,i){if(y=i[t=r?t:"next"]){if(!(y=y.call(i,o)))throw TypeError("iterator result is not an object");if(!y.done)return y;o=y.value,r<2&&(r=0)}else 1===r&&(y=i.return)&&y.call(i),r<2&&(o=TypeError("The iterator does not provide a '"+t+"' method"),r=1);i=f}else if((y=(m=u.n<0)?o:s.call(l,u))!==g)break}catch(t){i=f,r=1,o=t}finally{c=1}}return{value:y,done:m}}),!0),a;function p(t,a){for(r=t,o=a,y=0;!m&&c&&!n&&y<d.length;y++){var n,e=d[y],s=u.p,l=e[2];3<t?(n=l===a)&&(o=e[(r=e[4])?5:r=3],e[4]=e[5]=f):e[0]<=s&&((n=t<2&&s<e[1])?(r=0,u.v=a,u.n=e[1]):s<l&&(n=t<3||e[0]>a||l<a)&&(e[4]=t,e[5]=a,u.n=l,r=0))}if(n||1<t)return g;throw m=!0,a}}var g={};function v(){}function s(){}function l(){}var y=Object.getPrototypeOf,t=[][a]?y(y([][a]())):(_regeneratorDefine2(y={},a,function(){return this}),y),i=l.prototype=v.prototype=Object.create(t);function r(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,l):(t.__proto__=l,_regeneratorDefine2(t,n,"GeneratorFunction")),t.prototype=Object.create(i),t}return _regeneratorDefine2(i,"constructor",s.prototype=l),_regeneratorDefine2(l,"constructor",s),_regeneratorDefine2(l,n,s.displayName="GeneratorFunction"),_regeneratorDefine2(i),_regeneratorDefine2(i,n,"Generator"),_regeneratorDefine2(i,a,function(){return this}),_regeneratorDefine2(i,"toString",function(){return"[object Generator]"}),(_regenerator=function(){return{w:e,m:r}})()}function _regeneratorDefine2(t,a,n,e){var s=Object.defineProperty;try{s({},"",{})}catch(t){s=0}(_regeneratorDefine2=function(t,a,n,e){a?s?s(t,a,{value:n,enumerable:!e,configurable:!e,writable:!e}):t[a]=n:((e=function(a,n){_regeneratorDefine2(t,a,function(t){return this._invoke(a,n,t)})})("next",0),e("throw",1),e("return",2))})(t,a,n,e)}function asyncGeneratorStep(t,a,n,e,s,l,i){try{var r=t[l](i),o=r.value}catch(t){return void n(t)}r.done?a(o):Promise.resolve(o).then(e,s)}function _asyncToGenerator(r){return function(){var t=this,i=arguments;return new Promise(function(a,n){var e=r.apply(t,i);function s(t){asyncGeneratorStep(e,a,n,s,l,"next",t)}function l(t){asyncGeneratorStep(e,a,n,s,l,"throw",t)}s(void 0)})}}function _createForOfIteratorHelper(t,a){var n,e,s,l,i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(i)return s=!(e=!0),{s:function(){i=i.call(t)},n:function(){var t=i.next();return e=t.done,t},e:function(t){s=!0,n=t},f:function(){try{e||null==i.return||i.return()}finally{if(s)throw n}}};if(Array.isArray(t)||(i=_unsupportedIterableToArray(t))||a&&t&&"number"==typeof t.length)return i&&(t=i),l=0,{s:a=function(){},n:function(){return l>=t.length?{done:!0}:{done:!1,value:t[l++]}},e:function(t){throw t},f:a};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(t,a){var n;if(t)return"string"==typeof t?_arrayLikeToArray(t,a):"Map"===(n="Object"===(n={}.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:n)||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(t,a):void 0}function _arrayLikeToArray(t,a){(null==a||a>t.length)&&(a=t.length);for(var n=0,e=Array(a);n<a;n++)e[n]=t[n];return e}var map;function initMap(){var t={lat:.5,lng:110};function a(t,a){fetch(t).then(function(t){return t.json()}).then(function(t){t.features.forEach(function(t){t.properties||(t.properties={}),t.properties.fillColor=a}),map.data.addGeoJson(t)})}map=new google.maps.Map(document.getElementById("map"),{zoom:8,center:t,gestureHandling:"greedy",mapTypeId:google.maps.MapTypeId.ROADMAP,mapTypeControlOptions:{style:google.maps.MapTypeControlStyle.HORIZONTAL_BAR,position:google.maps.ControlPosition.BOTTOM_LEFT},styles:[{featureType:"administrative.locality",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"administrative.neighborhood",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"poi",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"road",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"transit",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"administrative.province",elementType:"labels",stylers:[{visibility:"on"}]}]}),a("/data/das_kapuas.json","green"),a("/data/das_ws_pawan.json","#ffc829"),a("/data/das_ws_sambas.json","red"),map.data.setStyle(function(t){return{fillColor:t.getProperty("fillColor")||"gray",fillOpacity:.3,strokeColor:"white",strokeWeight:.7}}),map.data.addListener("click",function(t){var a=t.feature.getProperty("name");new google.maps.InfoWindow({content:"<strong>".concat(a,"</strong>"),position:t.latLng}).open(map)}),(new google.maps.Geocoder).geocode({location:t},function(t,a){if("OK"===a&&t[0]){var n,e="",s=_createForOfIteratorHelper(t[0].address_components);try{for(s.s();!(n=s.n()).done;){var l=n.value;if(l.types.includes("administrative_area_level_1")){e=l.long_name;break}}}catch(t){s.e(t)}finally{s.f()}new google.maps.InfoWindow({content:"<strong>".concat(e,"</strong>")}).open(map)}})}function loadAwlrLastReading(){getData("/Home/GetAwlrLastReading").then(function(t){var a;console.log("Respon API:",t),t&&200===(null==(a=t.metaData)?void 0:a.code)&&($.each(t.response,function(t,a){var n,e,s=loadContentAwlrLastReading(a);$("#card-station-".concat(a.id)).length?$("#card-station-".concat(a.id)).html(s):$("#body-awlr #awlr-body").append('\n                        <div class="card-station-awlr" data-ts-id="'.concat(a.id,'" id="card-station-').concat(a.id,'" data-last-update="').concat(null==a.reading_at?"":moment(a.reading_at).locale("id").format("YYYY-MM-DD HH:mm:ss"),'">\n                            ').concat(s,"\n                        </div>\n                    ")),null!=a.latitude&&null!=a.longitude&&(n=new google.maps.Marker({position:{lat:parseFloat(a.latitude),lng:parseFloat(a.longitude)},map:map,title:a.name,icon:{url:"assets/img/awlr-marker.png",scaledSize:new google.maps.Size(35,50),anchor:new google.maps.Point(16,32)}}),s="",s=null!=a.siaga1&&null!=a.siaga2&&null!=a.siaga3?'\n                            <div class="progress-meter mt-2 mb-2">\n                                <div class="meter meter-normal meter-left" style="width: 25%;" title="Normal <br> < 6 m"><span class="fw-normal meter-text" style="color: #4DC27E;">0</span></div>\n                                <div class="meter meter-waspada meter-left" style="width: 25%;" title="Siaga 3 <br> '.concat(a.siaga3," ").concat(a.unit_display," - ").concat(a.siaga2," ").concat(a.unit_display,'"><span class="fw-normal meter-text" style="color: #FFDA4F;">').concat(a.siaga3," ").concat(a.unit_display,'</span></div>\n                                <div class="meter meter-siaga meter-left" style="width: 25%;" title="Siaga 2 <br> ').concat(a.siaga2," ").concat(a.unit_display," - ").concat(a.siaga1," ").concat(a.unit_display,'"><span class="fw-normal meter-text" style="color: #FFA600;">').concat(a.siaga2," ").concat(a.unit_display,'</span></div>\n                                <div class="meter meter-awas meter-left" style="width: 25%;" title="Siaga 1 <br> > ').concat(a.siaga1," ").concat(a.unit_display,'"><span class="fw-normal meter-text" style="color: #EF5350;">').concat(a.siaga1," ").concat(a.unit_display,"</span></div>\n                            </div>\n                        "):'<div class="progress-meter mt-2 mb-2">\n                            <div class="meter meter-normal meter-left" style="width: 25%;" title="Normal <br> < 6 m"><span class="fw-normal meter-text" style="color: #4DC27E;">0</span></div>\n                            <div class="meter meter-waspada meter-left" style="width: 25%;" title="Siaga 3 <br> 0 - 0"><span class="fw-normal meter-text" style="color: #FFDA4F;">0</span></div>\n                            <div class="meter meter-siaga meter-left" style="width: 25%;" title="Siaga 2 <br> 0 - 0"><span class="fw-normal meter-text" style="color: #FFA600;">0</span></div>\n                            <div class="meter meter-awas meter-left" style="width: 25%;" title="Siaga 1 <br> > 0"><span class="fw-normal meter-text" style="color: #EF5350;">0</span></div>\n                        </div>',s='\n                        <div style="font-family: \'Arial\', sans-serif;\n                            max-width: 280px;\n                            font-size: 13px;\n                            padding: 0;\n                            margin: 0;\n                            line-height: 1.3;">\n                            <div style="font-size: 15px;\n                                font-weight: bold;\n                                margin: 0;\n                                padding: 0;\n                                line-height: 1;">\n                                '.concat(a.name||"Tanpa Nama",'\n                            </div><br>\n\n                            <table style="width: 100%; border-collapse: collapse; margin-bottom: 6px;">\n                                <tr>\n                                    <td style="color: #555;">Device</td>\n                                    <td style="text-align: right;">\n                                        <div style="display: flex; justify-content: flex-end; align-items: center; gap: 6px;">\n                                            <span>').concat(a.brand_name||"-",'</span>\n                                            <span style="\n                                                display: inline-block;\n                                                background-color: #ffc107;\n                                                color: #000;\n                                                font-size: 11px;\n                                                padding: 2px 6px;\n                                                border-radius: 6px;\n                                            ">\n                                                ').concat(a.device_id||"-",'\n                                            </span>\n                                        </div>\n                                    </td>\n                                </tr>\n                                <tr>\n                                    <td style="color: #555;">Koordinat</td>\n                                    <td style="text-align: right; padding-left: 8px;">\n                                        ').concat(parseFloat(a.latitude).toFixed(6),", ").concat(parseFloat(a.longitude).toFixed(6),'\n                                    </td>\n                                </tr>\n                                <tr>\n                                    <td style="color: #555;">Status</td>\n                                    <td style="text-align: right;">\n                                        <span style="\n                                            display: inline-block;\n                                            padding: 2px 6px;\n                                            font-size: 12px;\n                                            border-radius: 6px;\n                                            background-color: ').concat("online"===a.status?"#28a745":"#6c757d",';\n                                            color: white;\n                                        ">\n                                            ').concat("online"===a.status?"Online":"No Data",'\n                                        </span>\n                                    </td>\n                                </tr>\n                                <tr>\n                                    <td style="color: #555;">Elevasi</td>\n                                    <td style="text-align: right; font-weight: bold; font-size: 14px;">\n                                        ').concat(parseFloat(a.water_level_elevation||0).toFixed(1)," ").concat(a.unit_display,"\n                                    </td>\n                                </tr>\n                            </table>\n\n                            ").concat(s,'<br>\n\n                            <div style="display: flex; align-items: center; font-size: 12px; color: #555;">\n                                <i class="far fa-clock" style="margin-right: 6px;"></i>\n                                ').concat(moment(a.reading_at).locale("id").format("YYYY-MM-DD HH:mm:ss"),"\n                            </div>\n                        </div>\n                        "),e=new google.maps.InfoWindow({content:s}),n.addListener("click",function(){e.open(map,n)}),google.maps.event.addListener(e,"domready",function(){setTimeout(function(){var t=document.querySelector(".gm-style-iw"),t=(t&&(t.style.padding="0px",t.style.margin="0px",(t=t.parentElement)&&(t.style.padding="0px",t.style.margin="0px"),t=null==t?void 0:t.parentElement)&&(t.style.padding="0px",t.style.marginTop="0px"),document.querySelector(".gm-style-iw-d"));t&&(t.style.margin="0px",t.style.padding="0px")},50)}))}),setTimeout(adjustPadding,100))}).catch(function(t){console.log(t)})}function loadContentAwlrLastReading(t){null!=t.reading_at&&(a=moment(t.reading_at).format("YYYY-MM-DD HH:mm:ss"),a=moment().diff(a,"hours"),Math.abs(a));var a=0<t.water_level_elevation?"+":"",n=(t.change_status,"");switch(t.warning_status){case null:n="bg-nostatus";break;case"Normal":n="bg-normal";break;case"Waspada":n="bg-siaga3";break;case"Siaga":n="bg-siaga2";break;case"Awas":n="bg-siaga1"}var e,s=null!=t.water_level?" ".concat(t.water_level.toFixed(2)," <small>").concat(t.unit_display,"</small></h6>"):"-",a=(null!=t.water_level_elevation&&"".concat(a).concat(t.water_level_elevation," <sup>mdpl</sup>"),"cmdpl"!=t.unitSensor&&"mdpl"!=t.unitSensor||"".concat(t.water_level_elevation," <sup>mdpl</sup>"),null!=t.debit&&"".concat(t.debit," <small>m<sup>3</sup>/s</small>"),null!=t.siaga1&&null!=t.siaga2&&null!=t.siaga3?'\n            <div class="progress-meter mt-2 mb-2">\n                <div class="meter meter-normal meter-left" style="width: 25%;" title="Normal <br> < 6 m"><span class="fw-normal meter-text" style="color: #4DC27E;">0</span></div>\n                <div class="meter meter-waspada meter-left" style="width: 25%;" title="Siaga 3 <br> '.concat(t.siaga3," ").concat(t.unit_display," - ").concat(t.siaga2," ").concat(t.unit_display,'"><span class="fw-normal meter-text" style="color: #FFDA4F;">').concat(t.siaga3," ").concat(t.unit_display,'</span></div>\n                <div class="meter meter-siaga meter-left" style="width: 25%;" title="Siaga 2 <br> ').concat(t.siaga2," ").concat(t.unit_display," - ").concat(t.siaga1," ").concat(t.unit_display,'"><span class="fw-normal meter-text" style="color: #FFA600;">').concat(t.siaga2," ").concat(t.unit_display,'</span></div>\n                <div class="meter meter-awas meter-left" style="width: 25%;" title="Siaga 1 <br> > ').concat(t.siaga1," ").concat(t.unit_display,'"><span class="fw-normal meter-text" style="color: #EF5350;">').concat(t.siaga1," ").concat(t.unit_display,"</span></div>\n            </div>\n        "):'<div class="progress-meter mt-2 mb-2">\n            <div class="meter meter-normal meter-left" style="width: 25%;" title="Normal <br> < 6 m"><span class="fw-normal meter-text" style="color: #4DC27E;">0</span></div>\n            <div class="meter meter-waspada meter-left" style="width: 25%;" title="Siaga 3 <br> 0 - 0"><span class="fw-normal meter-text" style="color: #FFDA4F;">0</span></div>\n            <div class="meter meter-siaga meter-left" style="width: 25%;" title="Siaga 2 <br> 0 - 0"><span class="fw-normal meter-text" style="color: #FFA600;">0</span></div>\n            <div class="meter meter-awas meter-left" style="width: 25%;" title="Siaga 1 <br> > 0"><span class="fw-normal meter-text" style="color: #EF5350;">0</span></div>\n        </div>'),l=(null!=t.battery&&(t.battery<7?'<span><i class="mdi mdi-battery-charging-low ms-1" style="color: #F69696;"></i> ':'<span><i class="mdi mdi-battery-charging-high ms-1" style="color: #F69696;"></i> ').concat(t.battery," Volt</span>"),"");return null!=t.reading_at&&(e=moment().format("YYYY-MMM-DD"),l=moment(t.reading_at).locale("id").format("YYYY-MMM-DD")==e?'Hari Ini, <span class="text-muted">'.concat(moment(t.reading_at).format("HH:mm"),"</span>"):moment(t.reading_at).locale("id").format("D MMMM YYYY HH:mm")),'\n        <div class="card-header">\n            <div class="d-flex align-items-center">\n                <h6 class="card-title text-uppercase text-station-name m-0">'.concat(t.name,'</h6>\n                <span class="reading-at ms-auto">').concat(l,"</span>\n            </div>\n        </div>"),'<div class="card-station-awlr">\n        <div class="card shadow-sm border-0 rounded-4 overflow-hidden animate__animated animate__fadeInUp" style="background: #f8f9fa;">\n            <div class="card-body p-3">\n                <div class="d-flex justify-content-between align-items-center mb-2">\n                    <div class="d-flex flex-column">\n                        <strong class="fs-8">'.concat(t.name,'</strong>\n                        <span class="text-muted small">').concat(t.device_id,'</span> </div>\n                    <div class="text-end">\n                        <span class="badge ').concat(n,' text-white py-2 px-3">').concat(s,'</span>\n                    </div>\n                </div>\n \n                <div class="d-flex align-items-center text-muted small mb-3">\n                    <i class="far fa-clock me-1"></i>\n                    <span>').concat(null==t.reading_at?"":moment(t.reading_at).locale("id").format("YYYY-MM-DD HH:mm:ss"),'</span>\n                </div>\n\n                <div class="warning-bar-container mt-2">\n                    ').concat(a,"\n                </div>\n            </div>\n        </div>\n    </div>")}function loadArrLastReading(){getData("/Home/GetArrLastReading").then(function(t){var a;console.log("Respon API arr:",t),t&&200===(null==(a=t.metaData)?void 0:a.code)&&$.each(t.response,function(t,a){var n=loadContentArrLastReading(a);$("#card-station-".concat(a.id)).length?$("#card-station-".concat(a.id)).html(n):$("#arr-body").append('\n                        <div class="card-station-arr" data-ts-id="'.concat(a.id,'" id="card-station-').concat(a.id,'" data-last-update="').concat(null==a.reading_at?"":moment(a.reading_at).locale("id").format("YYYY-MM-DD HH:mm:ss"),'">\n                            ').concat(n,"\n                        </div>\n                    ")),null!=a.latitude&&a.longitude})}).catch(function(t){console.log(t)})}function loadContentArrLastReading(t){var a=!1,n=(null!=t.reading_at&&(n=moment(t.reading_at).format("YYYY-MM-DD HH:mm:ss"),n=moment().diff(n,"hours"),Math.abs(n)<12)&&(a=!0),""),e=(null!=t.intensity_last_hour&&(n=t.intensity_last_hour),""),a=("Tidak Ada Hujan"!=t.intensity_last_hour&&a&&(e="blinking-content"),null!=t.rainfall_last_hour?" ".concat(t.rainfall_last_hour.toFixed(2)," <small>mm</small></h6>"):"-"),e=(null!=t.rainfall_last_hour&&null!=t.intensity_last_hour&&'\n            <div class="d-flex justify-content-around align-items-center reading-text mb-1">\n                <div class="col-4 text-center">\n                    <h4 class="text-range-hour">'.concat(moment(t.reading_at).locale("id").format("HH:mm"),'</h4>\n                </div>\n                <div class="col-4 text-center">\n                    <h4>').concat(t.rainfall_last_hour.toFixed(2),' <sup>mm</sup></h4>\n                </div>\n                <div class="col-4 col-intensity text-center">\n                    <img class="').concat(e,'" src="/images/arr/').concat(getIntensityIcon(t.intensity_last_hour),'" alt="').concat(t.intensity_last_hour,'">\n                </div>\n            </div>\n            <div class="d-flex justify-content-around reading-text">\n                <div class="col-4 text-center">\n                    Waktu\n                </div>\n                <div class="col-4 text-center">\n                    Curah Hujan\n                </div>\n                <div class="col-4 text-center fst-italic">\n                    ').concat(n,"\n                </div>\n            </div>\n        "),null!=t.battery&&(t.battery<7?'<span><small class="mdi mdi-battery-charging-low ms-1" style="color: #F69696;"></small> ':'<span><small class="mdi mdi-battery-charging-high ms-1" style="color: #F69696;"></small> ').concat(t.battery," Volt</span>"),"");return null!=t.reading_at&&(n=moment().format("YYYY-MMM-DD"),e=moment(t.reading_at).locale("id").format("YYYY-MMM-DD")==n?"Hari Ini":moment(t.reading_at).locale("id").locale("id").format("D MMMM YYYY")),'\n        <div class="card-header">\n            <div class="d-flex align-items-center">\n                <h6 class="card-title text-uppercase text-station-name m-0">'.concat(t.name,'</h6>\n                <span class="reading-at ms-auto">').concat(e,"</span>\n            </div>\n        </div>"),'<div class="card-station-arr">\n        <div class="card shadow-sm border-0 rounded-4 overflow-hidden animate__animated animate__fadeInUp" style="background: #f8f9fa;">\n            <div class="card-body p-3">\n                <div class="d-flex justify-content-between align-items-center mb-2">\n                    <div class="d-flex flex-column">\n                        <strong class="fs-8">'.concat(t.name,'</strong>\n                        <span class="text-muted small">').concat(t.device_id,'</span> </div>\n                    <div class="text-end">\n                        <span class="badge bg-normal text-white py-2 px-3">').concat(a,'</span>\n                    </div>\n                </div>\n \n                <div class="d-flex align-items-center text-muted small mb-3">\n                    <i class="far fa-clock me-1"></i>\n                    <span>').concat(null==t.reading_at?"":moment(t.reading_at).locale("id").format("YYYY-MM-DD HH:mm:ss"),"</span>\n                </div>\n            </div>\n        </div>\n    </div>")}function loadAwlrArrLastReading(){getData("/Home/GetAwlrArrLastReading").then(function(t){var a;console.log("Respon API arr:",t),t&&200===(null==(a=t.metaData)?void 0:a.code)&&$.each(t.response,function(t,a){var n=loadContentAwlrArrLastReading(a);$("#card-station-".concat(a.id)).length?$("#card-station-".concat(a.id)).html(n):$("#awlr-arr-body").append('\n                        <div class="card-station-awlr" data-ts-id="'.concat(a.id,'" id="card-station-').concat(a.id,'" data-last-update="').concat(null==a.reading_at?"":moment(a.reading_at).locale("id").format("YYYY-MM-DD HH:mm:ss"),'">\n                            ').concat(n,"\n                        </div>\n                    ")),null!=a.latitude&&a.longitude})}).catch(function(t){console.log(t)})}function loadContentAwlrArrLastReading(t){var a=!1,n=(null!=t.reading_at&&(n=moment(t.reading_at).format("YYYY-MM-DD HH:mm:ss"),n=moment().diff(n,"hours"),Math.abs(n)<12)&&(a=!0),0<t.water_level_elevation?"+":""),e=(t.change_status,"");switch(t.warning_status){case null:e="bg-nostatus";break;case"Normal":e="bg-normal";break;case"Waspada":e="bg-siaga3";break;case"Siaga":e="bg-siaga2";break;case"Awas":e="bg-siaga1"}var s=null!=t.water_level?" ".concat(t.water_level.toFixed(2)," <small>").concat(t.unit_display,"</small></h6>"):"-",n=(null!=t.water_level_elevation&&"".concat(n).concat(t.water_level_elevation," <sup>mdpl</sup>"),"cmdpl"!=t.unitSensor&&"mdpl"!=t.unitSensor||"".concat(t.water_level_elevation," <sup>mdpl</sup>"),null!=t.debit&&"".concat(t.debit," <small>m<sup>3</sup>/s</small>"),null!=t.rainfall_last_hour?" ".concat(t.rainfall_last_hour.toFixed(2)," <small>mm</small></h6>"):"-"),l=null!=t.siaga1&&null!=t.siaga2&&null!=t.siaga3?'\n            <div class="progress-meter mt-2 mb-2">\n                <div class="meter meter-normal meter-left" style="width: 25%;" title="Normal <br> < 6 m"><span class="fw-normal meter-text" style="color: #4DC27E;">0</span></div>\n                <div class="meter meter-waspada meter-left" style="width: 25%;" title="Siaga 3 <br> '.concat(t.siaga3," ").concat(t.unit_display," - ").concat(t.siaga2," ").concat(t.unit_display,'"><span class="fw-normal meter-text" style="color: #FFDA4F;">').concat(t.siaga3," ").concat(t.unit_display,'</span></div>\n                <div class="meter meter-siaga meter-left" style="width: 25%;" title="Siaga 2 <br> ').concat(t.siaga2," ").concat(t.unit_display," - ").concat(t.siaga1," ").concat(t.unit_display,'"><span class="fw-normal meter-text" style="color: #FFA600;">').concat(t.siaga2," ").concat(t.unit_display,'</span></div>\n                <div class="meter meter-awas meter-left" style="width: 25%;" title="Siaga 1 <br> > ').concat(t.siaga1," ").concat(t.unit_display,'"><span class="fw-normal meter-text" style="color: #EF5350;">').concat(t.siaga1," ").concat(t.unit_display,"</span></div>\n            </div>\n        "):'<div class="progress-meter mt-2 mb-2">\n            <div class="meter meter-normal meter-left" style="width: 25%;" title="Normal <br> < 6 m"><span class="fw-normal meter-text" style="color: #4DC27E;">0</span></div>\n            <div class="meter meter-waspada meter-left" style="width: 25%;" title="Siaga 3 <br> 0 - 0"><span class="fw-normal meter-text" style="color: #FFDA4F;">0</span></div>\n            <div class="meter meter-siaga meter-left" style="width: 25%;" title="Siaga 2 <br> 0 - 0"><span class="fw-normal meter-text" style="color: #FFA600;">0</span></div>\n            <div class="meter meter-awas meter-left" style="width: 25%;" title="Siaga 1 <br> > 0"><span class="fw-normal meter-text" style="color: #EF5350;">0</span></div>\n        </div>',i="-",r=(null!=t.battery&&(i="<h4>".concat(t.battery," <small>Volt</small><h4>")),""),o=(null!=t.reading_at&&(o=moment().format("YYYY-MMM-DD"),r=moment(t.reading_at).locale("id").format("YYYY-MMM-DD")==o?'Hari Ini, <span class="text-muted">'.concat(moment(t.reading_at).format("HH:mm"),"</span>"):moment(t.reading_at).locale("id").format("D MMMM YYYY HH:mm")),'\n        <div class="d-flex justify-content-around align-items-center reading-text">\n            <div class="col-4 text-center">\n                -\n            </div>\n            <div class="col-4 text-center">\n                -\n            </div>\n            <div class="col-4 text-center">\n                '.concat(i,'\n            </div>\n        </div>\n        <div class="d-flex justify-content-around reading-text">\n            <div class="col-4 text-center">\n                Curah Hujan\n            </div>\n            <div class="col-4 text-center">\n                Intensitas\n            </div>\n            <div class="col-4 text-center">\n                Battery\n            </div>\n        </div>\n    '),""),c=(null!=t.intensity_last_hour&&(o=t.intensity_last_hour),"");return"Tidak Ada Hujan"!=t.intensity_last_hour&&a&&(c="blinking-content"),null!=t.rainfall_last_hour&&null!=t.intensity_last_hour&&'\n            <div class="d-flex justify-content-around align-items-center reading-text mb-1">\n                <div class="col-4 text-center">\n                    '.concat(i,'\n                </div>\n                <div class="col-4 text-center">\n                    <h4>').concat(t.rainfall_last_hour.toFixed(2),' <small>mm</small></h4>\n                </div>\n                <div class="col-4 col-intensity text-center">\n                    <img class="').concat(c,'" src="/images/arr/').concat(getIntensityIcon(t.intensity_last_hour),'" alt="').concat(t.intensity_last_hour,'">\n                </div>\n            </div>\n            <div class="d-flex justify-content-around reading-text">\n                <div class="col-4 text-center text-uppercase">\n                    Battery\n                </div>\n                <div class="col-4 text-center text-uppercase">\n                    Curah Hujan\n                </div>\n                <div class="col-4 text-center fst-italic">\n                    ').concat(o,"\n                </div>\n            </div>\n        "),'\n        <div class="card-header">\n            <div class="d-flex align-items-center">\n                <h4 class="card-title text-uppercase text-station-name m-0">'.concat(t.name,'</h4>\n                <span class="reading-at ms-auto">').concat(r,"</span>\n            </div>\n        </div>\n    "),'<div class="card-station-awlr">\n        <div class="card shadow-sm border-0 rounded-4 overflow-hidden animate__animated animate__fadeInUp" style="background: #f8f9fa;">\n            <div class="card-body p-3">\n                <div class="d-flex justify-content-between align-items-center mb-2">\n                    <div class="d-flex flex-column">\n                        <strong class="fs-8">'.concat(t.name,'</strong>\n                        <span class="text-muted small">').concat(t.device_id,'</span> </div>\n                    <div class="text-end d-flex flex-column align-items-end">\n                        <span class="badge ').concat(e,' text-white py-2 px-3" style="margin-bottom: 0.5rem;">').concat(s,'</span>\n                        <span class="badge bg-normal text-white py-2 px-3">').concat(n,'</span>\n                    </div>\n                </div>\n \n                <div class="d-flex align-items-center text-muted small mb-3">\n                    <i class="far fa-clock me-1"></i>\n                    <span>').concat(null==t.reading_at?"":moment(t.reading_at).locale("id").format("YYYY-MM-DD HH:mm:ss"),'</span>\n                </div>\n\n                <div class="warning-bar-container mt-2">\n                    ').concat(l,"\n                </div>\n            </div>\n        </div>\n    </div>")}function loadDeviceOffline(){getData("/Home/GetSensorOffline").then(function(t){var a;t&&200===(null==(a=t.metaData)?void 0:a.code)&&$.each(t.response,function(t,a){var n=loadContentSensorOffline(a);$("#card-offline-".concat(a.id)).length?$("#card-offline-".concat(a.id)).html(n):$("#sensorList").append('\n                        <div class="card-offline-device" data-ts-id="'.concat(a.id,'" id="card-station-').concat(a.id,'" data-last-update="').concat(null==a.reading_at?"":moment(a.reading_at).locale("id").format("YYYY-MM-DD HH:mm:ss"),'">\n                            ').concat(n,"\n                        </div>\n                    "))})}).catch(function(t){console.log(t)})}function loadContentSensorOffline(t){return'<div class="card-station-awlr">\n        <div class="card shadow-sm border-0 rounded-4 overflow-hidden animate__animated animate__fadeInUp" style="background: #f8f9fa;">\n            <div class="card-body p-3">\n                <div class="d-flex justify-content-between align-items-center mb-2">\n                    <div class="d-flex flex-column">\n                        <strong class="fs-8">'.concat(t.name,'</strong>\n                        <span class="text-muted small">').concat(t.device_id,'</span> \n                    </div>\n                </div>\n \n                <div class="d-flex align-items-center text-muted small mb-3">\n                    <i class="far fa-clock me-1"></i>\n                    <span>').concat(null==t.reading_at?"":moment(t.reading_at).locale("id").format("YYYY-MM-DD HH:mm:ss"),"</span>\n                </div>\n            </div>\n        </div>\n    </div>")}function fetchSensorOfflineCount(){return _fetchSensorOfflineCount.apply(this,arguments)}function _fetchSensorOfflineCount(){return(_fetchSensorOfflineCount=_asyncToGenerator(_regenerator().m(function t(){var a,n;return _regenerator().w(function(t){for(;;)switch(t.n){case 0:return t.p=0,t.n=1,fetch("/Home/GetSensorOfflineCount");case 1:return a=t.v,t.n=2,a.json();case 2:a=t.v,n=null!=(n=null==a?void 0:a.jumlah)?n:0,document.getElementById("sensorCount").textContent=n,t.n=4;break;case 3:t.p=3,n=t.v,console.error("Gagal mengambil data sensor offline:",n);case 4:return t.a(2)}},t,null,[[0,3]])}))).apply(this,arguments)}function getData(t){return fetch(t).then(function(t){if(t.ok)return t.json();throw new Error("Network response was not ok")})}function adjustPadding(){var t=document.querySelectorAll(".footer"),n=document.querySelectorAll(".tab-pane");t.forEach(function(t,a){a=n[a];t&&a&&(t=t.offsetHeight,a.style.paddingBottom="".concat(t,"px"))})}function getIntensityIcon(t){var a=moment(),a=(a.locale("id"),a.tz("Asia/Jakarta"),a.hours()),n=5<=a&&a<10?"pagi":10<=a&&a<17?"siang":17<=a&&a<19?"sore":"malam",e="berawan.png";switch(t){case"Berawan":e="berawan-".concat(n,".png");break;case"Hujan Ringan":e="hujan-ringan.png";break;case"Hujan Sedang":e="hujan-sedang.png";break;case"Hujan Lebat":e="hujan-lebat.png";break;case"Hujan Sangat Lebat":e="hujan-sangat-lebat.png"}return e}$(document).ready(function(){loadAwlrLastReading(),loadArrLastReading(),loadAwlrArrLastReading(),loadDeviceOffline(),fetchSensorOfflineCount()});