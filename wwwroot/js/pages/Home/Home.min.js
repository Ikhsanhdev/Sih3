"use strict";function _regenerator(){var a,t,e="function"==typeof Symbol?Symbol:{},n=e.iterator||"@@iterator",s=e.toStringTag||"@@toStringTag";function r(e,n,s,r){var o=n&&n.prototype instanceof i?n:i,c=Object.create(o.prototype);return _regeneratorDefine2(c,"_invoke",function(e,n,s){var r,i,o,c=0,d=s||[],m=!1,u={p:0,n:0,v:a,a:p,f:p.bind(a,4),d:function(t,e){return r=t,i=0,o=a,u.n=e,l}};function p(e,n){for(i=e,o=n,t=0;!m&&c&&!s&&t<d.length;t++){var s,r=d[t],p=u.p,g=r[2];e>3?(s=g===n)&&(o=r[(i=r[4])?5:(i=3,3)],r[4]=r[5]=a):r[0]<=p&&((s=e<2&&p<r[1])?(i=0,u.v=n,u.n=r[1]):p<g&&(s=e<3||r[0]>n||n>g)&&(r[4]=e,r[5]=n,u.n=g,i=0))}if(s||e>1)return l;throw m=!0,n}return function(s,d,g){if(c>1)throw TypeError("Generator is already running");for(m&&1===d&&p(d,g),i=d,o=g;(t=i<2?a:o)||!m;){r||(i?i<3?(i>1&&(u.n=-1),p(i,o)):u.n=o:u.v=o);try{if(c=2,r){if(i||(s="next"),t=r[s]){if(!(t=t.call(r,o)))throw TypeError("iterator result is not an object");if(!t.done)return t;o=t.value,i<2&&(i=0)}else 1===i&&(t=r.return)&&t.call(r),i<2&&(o=TypeError("The iterator does not provide a '"+s+"' method"),i=1);r=a}else if((t=(m=u.n<0)?o:e.call(n,u))!==l)break}catch(t){r=a,i=1,o=t}finally{c=1}}return{value:t,done:m}}}(e,s,r),!0),c}var l={};function i(){}function o(){}function c(){}t=Object.getPrototypeOf;var d=[][n]?t(t([][n]())):(_regeneratorDefine2(t={},n,function(){return this}),t),m=c.prototype=i.prototype=Object.create(d);function u(a){return Object.setPrototypeOf?Object.setPrototypeOf(a,c):(a.__proto__=c,_regeneratorDefine2(a,s,"GeneratorFunction")),a.prototype=Object.create(m),a}return o.prototype=c,_regeneratorDefine2(m,"constructor",c),_regeneratorDefine2(c,"constructor",o),o.displayName="GeneratorFunction",_regeneratorDefine2(c,s,"GeneratorFunction"),_regeneratorDefine2(m),_regeneratorDefine2(m,s,"Generator"),_regeneratorDefine2(m,n,function(){return this}),_regeneratorDefine2(m,"toString",function(){return"[object Generator]"}),(_regenerator=function(){return{w:r,m:u}})()}function _regeneratorDefine2(a,t,e,n){var s=Object.defineProperty;try{s({},"",{})}catch(a){s=0}(_regeneratorDefine2=function(a,t,e,n){if(t)s?s(a,t,{value:e,enumerable:!n,configurable:!n,writable:!n}):a[t]=e;else{var r=function(t,e){_regeneratorDefine2(a,t,function(a){return this._invoke(t,e,a)})};r("next",0),r("throw",1),r("return",2)}})(a,t,e,n)}function asyncGeneratorStep(a,t,e,n,s,r,l){try{var i=a[r](l),o=i.value}catch(a){return void e(a)}i.done?t(o):Promise.resolve(o).then(n,s)}function _asyncToGenerator(a){return function(){var t=this,e=arguments;return new Promise(function(n,s){var r=a.apply(t,e);function l(a){asyncGeneratorStep(r,n,s,l,i,"next",a)}function i(a){asyncGeneratorStep(r,n,s,l,i,"throw",a)}l(void 0)})}}function _createForOfIteratorHelper(a,t){var e="undefined"!=typeof Symbol&&a[Symbol.iterator]||a["@@iterator"];if(!e){if(Array.isArray(a)||(e=_unsupportedIterableToArray(a))||t&&a&&"number"==typeof a.length){e&&(a=e);var n=0,s=function(){};return{s:s,n:function(){return n>=a.length?{done:!0}:{done:!1,value:a[n++]}},e:function(a){throw a},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,l=!0,i=!1;return{s:function(){e=e.call(a)},n:function(){var a=e.next();return l=a.done,a},e:function(a){i=!0,r=a},f:function(){try{l||null==e.return||e.return()}finally{if(i)throw r}}}}function _unsupportedIterableToArray(a,t){if(a){if("string"==typeof a)return _arrayLikeToArray(a,t);var e={}.toString.call(a).slice(8,-1);return"Object"===e&&a.constructor&&(e=a.constructor.name),"Map"===e||"Set"===e?Array.from(a):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?_arrayLikeToArray(a,t):void 0}}function _arrayLikeToArray(a,t){(null==t||t>a.length)&&(t=a.length);for(var e=0,n=Array(t);e<t;e++)n[e]=a[e];return n}var map;function initMap(){var a={lat:.5,lng:110};function t(a,t){fetch(a).then(function(a){return a.json()}).then(function(a){a.features.forEach(function(a){a.properties||(a.properties={}),a.properties.fillColor=t}),map.data.addGeoJson(a)})}map=new google.maps.Map(document.getElementById("map"),{zoom:8,center:a,gestureHandling:"greedy",mapTypeId:google.maps.MapTypeId.ROADMAP,mapTypeControlOptions:{style:google.maps.MapTypeControlStyle.HORIZONTAL_BAR,position:google.maps.ControlPosition.BOTTOM_LEFT},styles:[{featureType:"administrative.locality",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"administrative.neighborhood",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"poi",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"road",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"transit",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"administrative.province",elementType:"labels",stylers:[{visibility:"on"}]}]}),t("/data/das_kapuas.json","green"),t("/data/das_ws_pawan.json","#ffc829"),t("/data/das_ws_sambas.json","red"),map.data.setStyle(function(a){return{fillColor:a.getProperty("fillColor")||"gray",fillOpacity:.3,strokeColor:"white",strokeWeight:.7}}),map.data.addListener("click",function(a){var t=a.feature.getProperty("name");new google.maps.InfoWindow({content:"<strong>".concat(t,"</strong>"),position:a.latLng}).open(map)}),(new google.maps.Geocoder).geocode({location:a},function(a,t){if("OK"===t&&a[0]){var e,n="",s=_createForOfIteratorHelper(a[0].address_components);try{for(s.s();!(e=s.n()).done;){var r=e.value;if(r.types.includes("administrative_area_level_1")){n=r.long_name;break}}}catch(a){s.e(a)}finally{s.f()}new google.maps.InfoWindow({content:"<strong>".concat(n,"</strong>")}).open(map)}})}function loadAwlrLastReading(){getData("/Home/GetAwlrLastReading").then(function(a){var t;console.log("Respon API:",a);var e=a;e&&200===(null===(t=e.metaData)||void 0===t?void 0:t.code)&&($.each(e.response,function(a,t){var e=loadContentAwlrLastReading(t);if($("#card-station-".concat(t.id)).length?$("#card-station-".concat(t.id)).html(e):$("#body-awlr #awlr-body").append('\n                        <div class="card-station-awlr" data-ts-id="'.concat(t.id,'" id="card-station-').concat(t.id,'" data-last-update="').concat(null==t.reading_at?"":moment(t.reading_at).locale("id").format("YYYY-MM-DD HH:mm:ss"),'">\n                            ').concat(e,"\n                        </div>\n                    ")),null!=t.latitude&&null!=t.longitude){var n=new google.maps.Marker({position:{lat:parseFloat(t.latitude),lng:parseFloat(t.longitude)},map:map,title:t.name,icon:{url:"assets/img/awlr-marker.png",scaledSize:new google.maps.Size(35,50),anchor:new google.maps.Point(16,32)}}),s="";s=null!=t.siaga1&&null!=t.siaga2&&null!=t.siaga3?'\n                            <div class="progress-meter mt-2 mb-2">\n                                <div class="meter meter-normal meter-left" style="width: 25%;" title="Normal <br> < 6 m"><span class="fw-normal meter-text" style="color: #4DC27E;">0</span></div>\n                                <div class="meter meter-waspada meter-left" style="width: 25%;" title="Siaga 3 <br> '.concat(t.siaga3," ").concat(t.unit_display," - ").concat(t.siaga2," ").concat(t.unit_display,'"><span class="fw-normal meter-text" style="color: #FFDA4F;">').concat(t.siaga3," ").concat(t.unit_display,'</span></div>\n                                <div class="meter meter-siaga meter-left" style="width: 25%;" title="Siaga 2 <br> ').concat(t.siaga2," ").concat(t.unit_display," - ").concat(t.siaga1," ").concat(t.unit_display,'"><span class="fw-normal meter-text" style="color: #FFA600;">').concat(t.siaga2," ").concat(t.unit_display,'</span></div>\n                                <div class="meter meter-awas meter-left" style="width: 25%;" title="Siaga 1 <br> > ').concat(t.siaga1," ").concat(t.unit_display,'"><span class="fw-normal meter-text" style="color: #EF5350;">').concat(t.siaga1," ").concat(t.unit_display,"</span></div>\n                            </div>\n                        "):'<div class="progress-meter mt-2 mb-2">\n                            <div class="meter meter-normal meter-left" style="width: 25%;" title="Normal <br> < 6 m"><span class="fw-normal meter-text" style="color: #4DC27E;">0</span></div>\n                            <div class="meter meter-waspada meter-left" style="width: 25%;" title="Siaga 3 <br> 0 - 0"><span class="fw-normal meter-text" style="color: #FFDA4F;">0</span></div>\n                            <div class="meter meter-siaga meter-left" style="width: 25%;" title="Siaga 2 <br> 0 - 0"><span class="fw-normal meter-text" style="color: #FFA600;">0</span></div>\n                            <div class="meter meter-awas meter-left" style="width: 25%;" title="Siaga 1 <br> > 0"><span class="fw-normal meter-text" style="color: #EF5350;">0</span></div>\n                        </div>';var r='\n                        <div style="font-family: \'Arial\', sans-serif;\n                            max-width: 280px;\n                            font-size: 13px;\n                            padding: 0;\n                            margin: 0;\n                            line-height: 1.3;">\n                            <div style="font-size: 15px;\n                                font-weight: bold;\n                                margin: 0;\n                                padding: 0;\n                                line-height: 1;">\n                                '.concat(t.name||"Tanpa Nama",'\n                            </div><br>\n\n                            <table style="width: 100%; border-collapse: collapse; margin-bottom: 6px;">\n                                <tr>\n                                    <td style="color: #555;">Device</td>\n                                    <td style="text-align: right;">\n                                        <div style="display: flex; justify-content: flex-end; align-items: center; gap: 6px;">\n                                            <span>').concat(t.brand_name||"-",'</span>\n                                            <span style="\n                                                display: inline-block;\n                                                background-color: #ffc107;\n                                                color: #000;\n                                                font-size: 11px;\n                                                padding: 2px 6px;\n                                                border-radius: 6px;\n                                            ">\n                                                ').concat(t.device_id||"-",'\n                                            </span>\n                                        </div>\n                                    </td>\n                                </tr>\n                                <tr>\n                                    <td style="color: #555;">Koordinat</td>\n                                    <td style="text-align: right; padding-left: 8px;">\n                                        ').concat(parseFloat(t.latitude).toFixed(6),", ").concat(parseFloat(t.longitude).toFixed(6),'\n                                    </td>\n                                </tr>\n                                <tr>\n                                    <td style="color: #555;">Status</td>\n                                    <td style="text-align: right;">\n                                        <span style="\n                                            display: inline-block;\n                                            padding: 2px 6px;\n                                            font-size: 12px;\n                                            border-radius: 6px;\n                                            background-color: ').concat("online"===t.status?"#28a745":"#6c757d",';\n                                            color: white;\n                                        ">\n                                            ').concat("online"===t.status?"Online":"No Data",'\n                                        </span>\n                                    </td>\n                                </tr>\n                                <tr>\n                                    <td style="color: #555;">Elevasi</td>\n                                    <td style="text-align: right; font-weight: bold; font-size: 14px;">\n                                        ').concat(parseFloat(t.water_level_elevation||0).toFixed(1)," ").concat(t.unit_display,"\n                                    </td>\n                                </tr>\n                            </table>\n\n                            ").concat(s,'<br>\n\n                            <div style="display: flex; align-items: center; font-size: 12px; color: #555;">\n                                <i class="far fa-clock" style="margin-right: 6px;"></i>\n                                ').concat(moment(t.reading_at).locale("id").format("YYYY-MM-DD HH:mm:ss"),"\n                            </div>\n                        </div>\n                        "),l=new google.maps.InfoWindow({content:r});n.addListener("click",function(){l.open(map,n)}),google.maps.event.addListener(l,"domready",function(){setTimeout(function(){var a=document.querySelector(".gm-style-iw");if(a){a.style.padding="0px",a.style.margin="0px";var t=a.parentElement;t&&(t.style.padding="0px",t.style.margin="0px");var e=null==t?void 0:t.parentElement;e&&(e.style.padding="0px",e.style.marginTop="0px")}var n=document.querySelector(".gm-style-iw-d");n&&(n.style.margin="0px",n.style.padding="0px")},50)})}}),setTimeout(adjustPadding,100))}).catch(function(a){console.log(a)})}function loadContentAwlrLastReading(a){if(null!=a.reading_at){var t=moment(a.reading_at).format("YYYY-MM-DD HH:mm:ss"),e=moment().diff(t,"hours");Math.abs(e)<12&&(!0,'<small class="mdi mdi-circle text-success"></small> Online')}var n=a.water_level_elevation>0?"+":"";switch(a.change_status){case"increase":'<i class="mdi mdi-arrow-up-circle text-danger me-1"></i>';break;case"decrease":'<i class="mdi mdi-arrow-down-circle text-success me-1"></i>'}var s="";switch(a.warning_status){case null:'<span class="badge badge-awlr-nostatus rounded-1 ms-1 align-self-center">TANPA STATUS</span>',s="bg-nostatus";break;case"Normal":'<span class="badge badge-awlr-normal rounded-1 ms-1 align-self-center">NORMAL</span>',s="bg-normal";break;case"Waspada":'<span class="badge badge-awlr-siaga3 rounded-1 ms-1 align-self-center blinking-content">WASPADA</span>',s="bg-siaga3";break;case"Siaga":'<span class="badge badge-awlr-siaga2 rounded-1 ms-1 align-self-center blinking-content">SIAGA</span>',s="bg-siaga2";break;case"Awas":'<span class="badge badge-awlr-siaga1 rounded-1 ms-1 align-self-center blinking-content">AWAS</span>',s="bg-siaga1"}a.water_level;var r=null!=a.water_level?" ".concat(a.water_level.toFixed(2)," <small>").concat(a.unit_display,"</small></h6>"):"-";null!=a.water_level_elevation&&"".concat(n).concat(a.water_level_elevation," <sup>mdpl</sup>");"cmdpl"!=a.unitSensor&&"mdpl"!=a.unitSensor||"".concat(a.water_level_elevation," <sup>mdpl</sup>");null!=a.debit&&"".concat(a.debit," <small>m<sup>3</sup>/s</small>");var l="";l=null!=a.siaga1&&null!=a.siaga2&&null!=a.siaga3?'\n            <div class="progress-meter mt-2 mb-2">\n                <div class="meter meter-normal meter-left" style="width: 25%;" title="Normal <br> < 6 m"><span class="fw-normal meter-text" style="color: #4DC27E;">0</span></div>\n                <div class="meter meter-waspada meter-left" style="width: 25%;" title="Siaga 3 <br> '.concat(a.siaga3," ").concat(a.unit_display," - ").concat(a.siaga2," ").concat(a.unit_display,'"><span class="fw-normal meter-text" style="color: #FFDA4F;">').concat(a.siaga3," ").concat(a.unit_display,'</span></div>\n                <div class="meter meter-siaga meter-left" style="width: 25%;" title="Siaga 2 <br> ').concat(a.siaga2," ").concat(a.unit_display," - ").concat(a.siaga1," ").concat(a.unit_display,'"><span class="fw-normal meter-text" style="color: #FFA600;">').concat(a.siaga2," ").concat(a.unit_display,'</span></div>\n                <div class="meter meter-awas meter-left" style="width: 25%;" title="Siaga 1 <br> > ').concat(a.siaga1," ").concat(a.unit_display,'"><span class="fw-normal meter-text" style="color: #EF5350;">').concat(a.siaga1," ").concat(a.unit_display,"</span></div>\n            </div>\n        "):'<div class="progress-meter mt-2 mb-2">\n            <div class="meter meter-normal meter-left" style="width: 25%;" title="Normal <br> < 6 m"><span class="fw-normal meter-text" style="color: #4DC27E;">0</span></div>\n            <div class="meter meter-waspada meter-left" style="width: 25%;" title="Siaga 3 <br> 0 - 0"><span class="fw-normal meter-text" style="color: #FFDA4F;">0</span></div>\n            <div class="meter meter-siaga meter-left" style="width: 25%;" title="Siaga 2 <br> 0 - 0"><span class="fw-normal meter-text" style="color: #FFA600;">0</span></div>\n            <div class="meter meter-awas meter-left" style="width: 25%;" title="Siaga 1 <br> > 0"><span class="fw-normal meter-text" style="color: #EF5350;">0</span></div>\n        </div>';null!=a.battery&&(a.battery<7?'<span><i class="mdi mdi-battery-charging-low ms-1" style="color: #F69696;"></i> '.concat(a.battery," Volt</span>"):'<span><i class="mdi mdi-battery-charging-high ms-1" style="color: #F69696;"></i> '.concat(a.battery," Volt</span>"));var i="";if(null!=a.reading_at){var o=moment().format("YYYY-MMM-DD");i=moment(a.reading_at).locale("id").format("YYYY-MMM-DD")==o?'Hari Ini, <span class="text-muted">'.concat(moment(a.reading_at).format("HH:mm"),"</span>"):moment(a.reading_at).locale("id").format("D MMMM YYYY HH:mm")}'\n        <div class="card-header">\n            <div class="d-flex align-items-center">\n                <h6 class="card-title text-uppercase text-station-name m-0">'.concat(a.name,'</h6>\n                <span class="reading-at ms-auto">').concat(i,"</span>\n            </div>\n        </div>");return'<div class="card-station-awlr">\n        <div class="card shadow-sm border-0 rounded-4 overflow-hidden animate__animated animate__fadeInUp" style="background: #f8f9fa;">\n            <div class="card-body p-3">\n                <div class="d-flex justify-content-between align-items-center mb-2">\n                    <div class="d-flex flex-column">\n                        <strong class="fs-8">'.concat(a.name,'</strong>\n                        <span class="text-muted small">').concat(a.device_id,'</span> </div>\n                    <div class="text-end">\n                        <span class="badge ').concat(s,' text-white py-2 px-3">').concat(r,'</span>\n                    </div>\n                </div>\n \n                <div class="d-flex align-items-center text-muted small mb-3">\n                    <i class="far fa-clock me-1"></i>\n                    <span>').concat(null==a.reading_at?"":moment(a.reading_at).locale("id").format("YYYY-MM-DD HH:mm:ss"),'</span>\n                </div>\n\n                <div class="warning-bar-container mt-2">\n                    ').concat(l,"\n                </div>\n            </div>\n        </div>\n    </div>")}function loadArrLastReading(){getData("/Home/GetArrLastReading").then(function(a){var t;console.log("Respon API arr:",a);var e=a;e&&200===(null===(t=e.metaData)||void 0===t?void 0:t.code)&&$.each(e.response,function(a,t){var e=loadContentArrLastReading(t);$("#card-station-".concat(t.id)).length?$("#card-station-".concat(t.id)).html(e):$("#arr-body").append('\n                        <div class="card-station-arr" data-ts-id="'.concat(t.id,'" id="card-station-').concat(t.id,'" data-last-update="').concat(null==t.reading_at?"":moment(t.reading_at).locale("id").format("YYYY-MM-DD HH:mm:ss"),'">\n                            ').concat(e,"\n                        </div>\n                    ")),null!=t.latitude&&t.longitude})}).catch(function(a){console.log(a)})}function loadContentArrLastReading(a){var t=!1;if(null!=a.reading_at){var e=moment(a.reading_at).format("YYYY-MM-DD HH:mm:ss"),n=moment().diff(e,"hours");Math.abs(n)<12&&(t=!0,'<small class="mdi mdi-circle text-success"></small> Online')}var s="";null!=a.intensity_last_hour&&(s=a.intensity_last_hour);var r="";"Tidak Ada Hujan"!=a.intensity_last_hour&&t&&(r="blinking-content");var l=null!=a.rainfall_last_hour?" ".concat(a.rainfall_last_hour.toFixed(2)," <small>mm</small></h6>"):"-";null!=a.rainfall_last_hour&&null!=a.intensity_last_hour&&'\n            <div class="d-flex justify-content-around align-items-center reading-text mb-1">\n                <div class="col-4 text-center">\n                    <h4 class="text-range-hour">'.concat(moment(a.reading_at).locale("id").format("HH:mm"),'</h4>\n                </div>\n                <div class="col-4 text-center">\n                    <h4>').concat(a.rainfall_last_hour.toFixed(2),' <sup>mm</sup></h4>\n                </div>\n                <div class="col-4 col-intensity text-center">\n                    <img class="').concat(r,'" src="/images/arr/').concat(getIntensityIcon(a.intensity_last_hour),'" alt="').concat(a.intensity_last_hour,'">\n                </div>\n            </div>\n            <div class="d-flex justify-content-around reading-text">\n                <div class="col-4 text-center">\n                    Waktu\n                </div>\n                <div class="col-4 text-center">\n                    Curah Hujan\n                </div>\n                <div class="col-4 text-center fst-italic">\n                    ').concat(s,"\n                </div>\n            </div>\n        ");null!=a.battery&&(a.battery<7?'<span><small class="mdi mdi-battery-charging-low ms-1" style="color: #F69696;"></small> '.concat(a.battery," Volt</span>"):'<span><small class="mdi mdi-battery-charging-high ms-1" style="color: #F69696;"></small> '.concat(a.battery," Volt</span>"));var i="";if(null!=a.reading_at){var o=moment().format("YYYY-MMM-DD");i=moment(a.reading_at).locale("id").format("YYYY-MMM-DD")==o?"Hari Ini":moment(a.reading_at).locale("id").locale("id").format("D MMMM YYYY")}'\n        <div class="card-header">\n            <div class="d-flex align-items-center">\n                <h6 class="card-title text-uppercase text-station-name m-0">'.concat(a.name,'</h6>\n                <span class="reading-at ms-auto">').concat(i,"</span>\n            </div>\n        </div>");return'<div class="card-station-arr">\n        <div class="card shadow-sm border-0 rounded-4 overflow-hidden animate__animated animate__fadeInUp" style="background: #f8f9fa;">\n            <div class="card-body p-3">\n                <div class="d-flex justify-content-between align-items-center mb-2">\n                    <div class="d-flex flex-column">\n                        <strong class="fs-8">'.concat(a.name,'</strong>\n                        <span class="text-muted small">').concat(a.device_id,'</span> </div>\n                    <div class="text-end">\n                        <span class="badge bg-normal text-white py-2 px-3">').concat(l,'</span>\n                    </div>\n                </div>\n \n                <div class="d-flex align-items-center text-muted small mb-3">\n                    <i class="far fa-clock me-1"></i>\n                    <span>').concat(null==a.reading_at?"":moment(a.reading_at).locale("id").format("YYYY-MM-DD HH:mm:ss"),"</span>\n                </div>\n            </div>\n        </div>\n    </div>")}function loadAwlrArrLastReading(){getData("/Home/GetAwlrArrLastReading").then(function(a){var t;console.log("Respon API arr:",a);var e=a;e&&200===(null===(t=e.metaData)||void 0===t?void 0:t.code)&&$.each(e.response,function(a,t){var e=loadContentAwlrArrLastReading(t);$("#card-station-".concat(t.id)).length?$("#card-station-".concat(t.id)).html(e):$("#awlr-arr-body").append('\n                        <div class="card-station-awlr" data-ts-id="'.concat(t.id,'" id="card-station-').concat(t.id,'" data-last-update="').concat(null==t.reading_at?"":moment(t.reading_at).locale("id").format("YYYY-MM-DD HH:mm:ss"),'">\n                            ').concat(e,"\n                        </div>\n                    ")),null!=t.latitude&&t.longitude})}).catch(function(a){console.log(a)})}function loadContentAwlrArrLastReading(a){var t=!1;if(null!=a.reading_at){var e=moment(a.reading_at).format("YYYY-MM-DD HH:mm:ss"),n=moment().diff(e,"hours");Math.abs(n)<12&&(t=!0,'<small class="mdi mdi-circle text-success"></small> Online')}var s=a.water_level_elevation>0?"+":"";switch(a.change_status){case"increase":'<i class="mdi mdi-arrow-up-circle text-danger me-1"></i>';break;case"decrease":'<i class="mdi mdi-arrow-down-circle text-success me-1"></i>'}var r="";switch(a.warning_status){case null:'<span class="badge badge-awlr-nostatus rounded-1 ms-1 align-self-center">TANPA STATUS</span>',r="bg-nostatus";break;case"Normal":'<span class="badge badge-awlr-normal rounded-1 ms-1 align-self-center">NORMAL</span>',r="bg-normal";break;case"Waspada":'<span class="badge badge-awlr-siaga3 rounded-1 ms-1 align-self-center blinking-content">WASPADA</span>',r="bg-siaga3";break;case"Siaga":'<span class="badge badge-awlr-siaga2 rounded-1 ms-1 align-self-center blinking-content">SIAGA</span>',r="bg-siaga2";break;case"Awas":'<span class="badge badge-awlr-siaga1 rounded-1 ms-1 align-self-center blinking-content">AWAS</span>',r="bg-siaga1"}a.water_level;var l=null!=a.water_level?" ".concat(a.water_level.toFixed(2)," <small>").concat(a.unit_display,"</small></h6>"):"-";null!=a.water_level_elevation&&"".concat(s).concat(a.water_level_elevation," <sup>mdpl</sup>");"cmdpl"!=a.unitSensor&&"mdpl"!=a.unitSensor||"".concat(a.water_level_elevation," <sup>mdpl</sup>");null!=a.debit&&"".concat(a.debit," <small>m<sup>3</sup>/s</small>");var i=null!=a.rainfall_last_hour?" ".concat(a.rainfall_last_hour.toFixed(2)," <small>mm</small></h6>"):"-",o="";o=null!=a.siaga1&&null!=a.siaga2&&null!=a.siaga3?'\n            <div class="progress-meter mt-2 mb-2">\n                <div class="meter meter-normal meter-left" style="width: 25%;" title="Normal <br> < 6 m"><span class="fw-normal meter-text" style="color: #4DC27E;">0</span></div>\n                <div class="meter meter-waspada meter-left" style="width: 25%;" title="Siaga 3 <br> '.concat(a.siaga3," ").concat(a.unit_display," - ").concat(a.siaga2," ").concat(a.unit_display,'"><span class="fw-normal meter-text" style="color: #FFDA4F;">').concat(a.siaga3," ").concat(a.unit_display,'</span></div>\n                <div class="meter meter-siaga meter-left" style="width: 25%;" title="Siaga 2 <br> ').concat(a.siaga2," ").concat(a.unit_display," - ").concat(a.siaga1," ").concat(a.unit_display,'"><span class="fw-normal meter-text" style="color: #FFA600;">').concat(a.siaga2," ").concat(a.unit_display,'</span></div>\n                <div class="meter meter-awas meter-left" style="width: 25%;" title="Siaga 1 <br> > ').concat(a.siaga1," ").concat(a.unit_display,'"><span class="fw-normal meter-text" style="color: #EF5350;">').concat(a.siaga1," ").concat(a.unit_display,"</span></div>\n            </div>\n        "):'<div class="progress-meter mt-2 mb-2">\n            <div class="meter meter-normal meter-left" style="width: 25%;" title="Normal <br> < 6 m"><span class="fw-normal meter-text" style="color: #4DC27E;">0</span></div>\n            <div class="meter meter-waspada meter-left" style="width: 25%;" title="Siaga 3 <br> 0 - 0"><span class="fw-normal meter-text" style="color: #FFDA4F;">0</span></div>\n            <div class="meter meter-siaga meter-left" style="width: 25%;" title="Siaga 2 <br> 0 - 0"><span class="fw-normal meter-text" style="color: #FFA600;">0</span></div>\n            <div class="meter meter-awas meter-left" style="width: 25%;" title="Siaga 1 <br> > 0"><span class="fw-normal meter-text" style="color: #EF5350;">0</span></div>\n        </div>';var c="-";null!=a.battery&&(c="<h4>".concat(a.battery," <small>Volt</small><h4>"));var d="";if(null!=a.reading_at){var m=moment().format("YYYY-MMM-DD");d=moment(a.reading_at).locale("id").format("YYYY-MMM-DD")==m?'Hari Ini, <span class="text-muted">'.concat(moment(a.reading_at).format("HH:mm"),"</span>"):moment(a.reading_at).locale("id").format("D MMMM YYYY HH:mm")}'\n        <div class="d-flex justify-content-around align-items-center reading-text">\n            <div class="col-4 text-center">\n                -\n            </div>\n            <div class="col-4 text-center">\n                -\n            </div>\n            <div class="col-4 text-center">\n                '.concat(c,'\n            </div>\n        </div>\n        <div class="d-flex justify-content-around reading-text">\n            <div class="col-4 text-center">\n                Curah Hujan\n            </div>\n            <div class="col-4 text-center">\n                Intensitas\n            </div>\n            <div class="col-4 text-center">\n                Battery\n            </div>\n        </div>\n    ');var u="";null!=a.intensity_last_hour&&(u=a.intensity_last_hour);var p="";"Tidak Ada Hujan"!=a.intensity_last_hour&&t&&(p="blinking-content"),null!=a.rainfall_last_hour&&null!=a.intensity_last_hour&&'\n            <div class="d-flex justify-content-around align-items-center reading-text mb-1">\n                <div class="col-4 text-center">\n                    '.concat(c,'\n                </div>\n                <div class="col-4 text-center">\n                    <h4>').concat(a.rainfall_last_hour.toFixed(2),' <small>mm</small></h4>\n                </div>\n                <div class="col-4 col-intensity text-center">\n                    <img class="').concat(p,'" src="/images/arr/').concat(getIntensityIcon(a.intensity_last_hour),'" alt="').concat(a.intensity_last_hour,'">\n                </div>\n            </div>\n            <div class="d-flex justify-content-around reading-text">\n                <div class="col-4 text-center text-uppercase">\n                    Battery\n                </div>\n                <div class="col-4 text-center text-uppercase">\n                    Curah Hujan\n                </div>\n                <div class="col-4 text-center fst-italic">\n                    ').concat(u,"\n                </div>\n            </div>\n        ");'\n        <div class="card-header">\n            <div class="d-flex align-items-center">\n                <h4 class="card-title text-uppercase text-station-name m-0">'.concat(a.name,'</h4>\n                <span class="reading-at ms-auto">').concat(d,"</span>\n            </div>\n        </div>\n    ");return'<div class="card-station-awlr">\n        <div class="card shadow-sm border-0 rounded-4 overflow-hidden animate__animated animate__fadeInUp" style="background: #f8f9fa;">\n            <div class="card-body p-3">\n                <div class="d-flex justify-content-between align-items-center mb-2">\n                    <div class="d-flex flex-column">\n                        <strong class="fs-8">'.concat(a.name,'</strong>\n                        <span class="text-muted small">').concat(a.device_id,'</span> </div>\n                    <div class="text-end d-flex flex-column align-items-end">\n                        <span class="badge ').concat(r,' text-white py-2 px-3" style="margin-bottom: 0.5rem;">').concat(l,'</span>\n                        <span class="badge bg-normal text-white py-2 px-3">').concat(i,'</span>\n                    </div>\n                </div>\n \n                <div class="d-flex align-items-center text-muted small mb-3">\n                    <i class="far fa-clock me-1"></i>\n                    <span>').concat(null==a.reading_at?"":moment(a.reading_at).locale("id").format("YYYY-MM-DD HH:mm:ss"),'</span>\n                </div>\n\n                <div class="warning-bar-container mt-2">\n                    ').concat(o,"\n                </div>\n            </div>\n        </div>\n    </div>")}function loadDeviceOffline(){getData("/Home/GetSensorOffline").then(function(a){var t,e=a;e&&200===(null===(t=e.metaData)||void 0===t?void 0:t.code)&&$.each(e.response,function(a,t){var e=loadContentSensorOffline(t);$("#card-offline-".concat(t.id)).length?$("#card-offline-".concat(t.id)).html(e):$("#sensorList").append('\n                        <div class="card-offline-device" data-ts-id="'.concat(t.id,'" id="card-offline-').concat(t.id,'" data-last-update="').concat(null==t.reading_at?"":moment(t.reading_at).locale("id").format("YYYY-MM-DD HH:mm:ss"),'">\n                            ').concat(e,"\n                        </div>\n                    "))})}).catch(function(a){console.log(a)})}function loadContentSensorOffline(a){return'\n        <div class="card shadow-sm border-0 rounded-4 overflow-hidden animate__animated animate__fadeInUp" style="background: #f8f9fa;">\n            <div class="card-body p-3">\n                <div class="d-flex justify-content-between align-items-center mb-2">\n                    <div class="d-flex flex-column">\n                        <strong class="fs-8">'.concat(a.name,'</strong>\n                        <span class="text-muted small">').concat(a.device_id,'</span> \n                    </div>\n                </div>\n                <div class="d-flex align-items-center text-muted small mb-3">\n                    <i class="far fa-clock me-1"></i>\n                    <span>').concat(null==a.reading_at?"":moment(a.reading_at).locale("id").format("YYYY-MM-DD HH:mm:ss"),"</span>\n                </div>\n            </div>\n        </div>\n    ")}function fetchSensorOfflineCount(){return _fetchSensorOfflineCount.apply(this,arguments)}function _fetchSensorOfflineCount(){return(_fetchSensorOfflineCount=_asyncToGenerator(_regenerator().m(function a(){var t,e,n,s,r;return _regenerator().w(function(a){for(;;)switch(a.n){case 0:return a.p=0,a.n=1,fetch("/Home/GetSensorOfflineCount");case 1:return e=a.v,a.n=2,e.json();case 2:n=a.v,s=null!==(t=null==n?void 0:n.jumlah)&&void 0!==t?t:0,document.getElementById("sensorCount").textContent=s,a.n=4;break;case 3:a.p=3,r=a.v,console.error("Gagal mengambil data sensor offline:",r);case 4:return a.a(2)}},a,null,[[0,3]])}))).apply(this,arguments)}function getData(a){return fetch(a).then(function(a){if(!a.ok)throw new Error("Network response was not ok");return a.json()})}function adjustPadding(){var a=document.querySelectorAll(".footer"),t=document.querySelectorAll(".tab-pane");a.forEach(function(a,e){var n=t[e];if(a&&n){var s=a.offsetHeight;n.style.paddingBottom="".concat(s,"px")}})}function getIntensityIcon(a){var t="pagi",e=moment();e.locale("id"),e.tz("Asia/Jakarta");var n=e.hours();t=n>=5&&n<10?"pagi":n>=10&&n<17?"siang":n>=17&&n<19?"sore":"malam";var s="berawan.png";switch(a){case"Berawan":s="berawan-".concat(t,".png");break;case"Hujan Ringan":s="hujan-ringan.png";break;case"Hujan Sedang":s="hujan-sedang.png";break;case"Hujan Lebat":s="hujan-lebat.png";break;case"Hujan Sangat Lebat":s="hujan-sangat-lebat.png"}return s}$(document).ready(function(){loadAwlrLastReading(),loadArrLastReading(),loadAwlrArrLastReading(),loadDeviceOffline(),fetchSensorOfflineCount()});