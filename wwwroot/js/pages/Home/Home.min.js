function _regenerator(){var g,t=(i="function"==typeof Symbol?Symbol:{}).iterator||"@@iterator",n=i.toStringTag||"@@toStringTag";function e(t,n,e,a){var l,i,s,r,o,c,d,m,p,n=n&&n.prototype instanceof v?n:v;return _regeneratorDefine2(n=Object.create(n.prototype),"_invoke",(l=t,i=e,d=a||[],m=!1,p={p:c=0,n:0,v:g,a:u,f:u.bind(g,4),d:function(t,n){return s=t,r=0,o=g,p.n=n,f}},function(t,n,e){if(1<c)throw TypeError("Generator is already running");for(m&&1===n&&u(n,e),r=n,o=e;(y=r<2?g:o)||!m;){s||(r?r<3?(1<r&&(p.n=-1),u(r,o)):p.n=o:p.v=o);try{if(c=2,s){if(y=s[t=r?t:"next"]){if(!(y=y.call(s,o)))throw TypeError("iterator result is not an object");if(!y.done)return y;o=y.value,r<2&&(r=0)}else 1===r&&(y=s.return)&&y.call(s),r<2&&(o=TypeError("The iterator does not provide a '"+t+"' method"),r=1);s=g}else if((y=(m=p.n<0)?o:l.call(i,p))!==f)break}catch(t){s=g,r=1,o=t}finally{c=1}}return{value:y,done:m}}),!0),n;function u(t,n){for(r=t,o=n,y=0;!m&&c&&!e&&y<d.length;y++){var e,a=d[y],l=p.p,i=a[2];3<t?(e=i===n)&&(o=a[(r=a[4])?5:r=3],a[4]=a[5]=g):a[0]<=l&&((e=t<2&&l<a[1])?(r=0,p.v=n,p.n=a[1]):l<i&&(e=t<3||a[0]>n||i<n)&&(a[4]=t,a[5]=n,p.n=i,r=0))}if(e||1<t)return f;throw m=!0,n}}var f={};function v(){}function a(){}function l(){}var y=Object.getPrototypeOf,i=[][t]?y(y([][t]())):(_regeneratorDefine2(y={},t,function(){return this}),y),s=l.prototype=v.prototype=Object.create(i);function r(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,l):(t.__proto__=l,_regeneratorDefine2(t,n,"GeneratorFunction")),t.prototype=Object.create(s),t}return _regeneratorDefine2(s,"constructor",a.prototype=l),_regeneratorDefine2(l,"constructor",a),_regeneratorDefine2(l,n,a.displayName="GeneratorFunction"),_regeneratorDefine2(s),_regeneratorDefine2(s,n,"Generator"),_regeneratorDefine2(s,t,function(){return this}),_regeneratorDefine2(s,"toString",function(){return"[object Generator]"}),(_regenerator=function(){return{w:e,m:r}})()}function _regeneratorDefine2(t,n,e,a){var l=Object.defineProperty;try{l({},"",{})}catch(t){l=0}(_regeneratorDefine2=function(t,n,e,a){n?l?l(t,n,{value:e,enumerable:!a,configurable:!a,writable:!a}):t[n]=e:((a=function(n,e){_regeneratorDefine2(t,n,function(t){return this._invoke(n,e,t)})})("next",0),a("throw",1),a("return",2))})(t,n,e,a)}function asyncGeneratorStep(t,n,e,a,l,i,s){try{var r=t[i](s),o=r.value}catch(t){return void e(t)}r.done?n(o):Promise.resolve(o).then(a,l)}function _asyncToGenerator(r){return function(){var t=this,s=arguments;return new Promise(function(n,e){var a=r.apply(t,s);function l(t){asyncGeneratorStep(a,n,e,l,i,"next",t)}function i(t){asyncGeneratorStep(a,n,e,l,i,"throw",t)}l(void 0)})}}function _createForOfIteratorHelper(t,n){var e,a,l,i,s="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(s)return l=!(a=!0),{s:function(){s=s.call(t)},n:function(){var t=s.next();return a=t.done,t},e:function(t){l=!0,e=t},f:function(){try{a||null==s.return||s.return()}finally{if(l)throw e}}};if(Array.isArray(t)||(s=_unsupportedIterableToArray(t))||n&&t&&"number"==typeof t.length)return s&&(t=s),i=0,{s:n=function(){},n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:n};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(t,n){var e;if(t)return"string"==typeof t?_arrayLikeToArray(t,n):"Map"===(e="Object"===(e={}.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:e)||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?_arrayLikeToArray(t,n):void 0}function _arrayLikeToArray(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,a=Array(n);e<n;e++)a[e]=t[e];return a}var map;function initMap(){var t={lat:.5,lng:110};function n(t,n){fetch(t).then(function(t){return t.json()}).then(function(t){t.features.forEach(function(t){t.properties||(t.properties={}),t.properties.fillColor=n}),map.data.addGeoJson(t)})}map=new google.maps.Map(document.getElementById("map"),{zoom:8,center:t,gestureHandling:"greedy",mapTypeId:google.maps.MapTypeId.ROADMAP,mapTypeControlOptions:{style:google.maps.MapTypeControlStyle.HORIZONTAL_BAR,position:google.maps.ControlPosition.BOTTOM_LEFT},styles:[{featureType:"administrative.locality",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"administrative.neighborhood",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"poi",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"road",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"transit",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"administrative.province",elementType:"labels",stylers:[{visibility:"on"}]}]}),n("/data/das_kapuas.json","green"),n("/data/das_ws_pawan.json","#ffc829"),n("/data/das_ws_sambas.json","red"),map.data.setStyle(function(t){return{fillColor:t.getProperty("fillColor")||"gray",fillOpacity:.3,strokeColor:"white",strokeWeight:.7}}),map.data.addListener("click",function(t){var n=t.feature.getProperty("name");new google.maps.InfoWindow({content:"<strong>".concat(n,"</strong>"),position:t.latLng}).open(map)}),(new google.maps.Geocoder).geocode({location:t},function(t,n){if("OK"===n&&t[0]){var e,a="",l=_createForOfIteratorHelper(t[0].address_components);try{for(l.s();!(e=l.n()).done;){var i=e.value;if(i.types.includes("administrative_area_level_1")){a=i.long_name;break}}}catch(t){l.e(t)}finally{l.f()}new google.maps.InfoWindow({content:"<strong>".concat(a,"</strong>")}).open(map)}})}function loadAwlrLastReading(){getData("/Home/GetAwlrLastReading").then(function(t){var n;console.log("Respon API:",t),t&&200===(null==(n=t.metaData)?void 0:n.code)&&($.each(t.response,function(t,n){var e,a,l=loadContentAwlrLastReading(n);$("#card-station-".concat(n.id)).length?$("#card-station-".concat(n.id)).html(l):$("#body-awlr #awlr-body").append('\n                        <div class="card-station-awlr" data-ts-id="'.concat(n.id,'" id="card-station-').concat(n.id,'" data-last-update="').concat(null==n.reading_at?"":moment(n.reading_at).locale("id").format("YYYY-MM-DD HH:mm:ss"),'">\n                            ').concat(l,"\n                        </div>\n                    ")),null!=n.latitude&&null!=n.longitude&&(e=new google.maps.Marker({position:{lat:parseFloat(n.latitude),lng:parseFloat(n.longitude)},map:map,title:n.name,icon:{url:"assets/img/awlr-marker.png",scaledSize:new google.maps.Size(35,50),anchor:new google.maps.Point(16,32)}}),l=null!=n.siaga1&&null!=n.siaga2&&null!=n.siaga3?'\n                            <div class="progress-meter mt-2 mb-2">\n                                <div class="meter meter-normal meter-left" style="width: 25%;" title="Normal <br> < 6 m"><span class="fw-normal meter-text" style="color: #4DC27E;">0</span></div>\n                                <div class="meter meter-waspada meter-left" style="width: 25%;" title="Siaga 3 <br> '.concat(n.siaga3," ").concat(n.unit_display," - ").concat(n.siaga2," ").concat(n.unit_display,'"><span class="fw-normal meter-text" style="color: #FFDA4F;">').concat(n.siaga3," ").concat(n.unit_display,'</span></div>\n                                <div class="meter meter-siaga meter-left" style="width: 25%;" title="Siaga 2 <br> ').concat(n.siaga2," ").concat(n.unit_display," - ").concat(n.siaga1," ").concat(n.unit_display,'"><span class="fw-normal meter-text" style="color: #FFA600;">').concat(n.siaga2," ").concat(n.unit_display,'</span></div>\n                                <div class="meter meter-awas meter-left" style="width: 25%;" title="Siaga 1 <br> > ').concat(n.siaga1," ").concat(n.unit_display,'"><span class="fw-normal meter-text" style="color: #EF5350;">').concat(n.siaga1," ").concat(n.unit_display,"</span></div>\n                            </div>\n                        "):'<div class="progress-meter mt-2 mb-2">\n                            <div class="meter meter-normal meter-left" style="width: 25%;" title="Normal <br> < 6 m"><span class="fw-normal meter-text" style="color: #4DC27E;">0</span></div>\n                            <div class="meter meter-waspada meter-left" style="width: 25%;" title="Siaga 3 <br> 0 - 0"><span class="fw-normal meter-text" style="color: #FFDA4F;">0</span></div>\n                            <div class="meter meter-siaga meter-left" style="width: 25%;" title="Siaga 2 <br> 0 - 0"><span class="fw-normal meter-text" style="color: #FFA600;">0</span></div>\n                            <div class="meter meter-awas meter-left" style="width: 25%;" title="Siaga 1 <br> > 0"><span class="fw-normal meter-text" style="color: #EF5350;">0</span></div>\n                        </div>',l='\n                        <div style="font-family: \'Arial\', sans-serif;\n                            max-width: 280px;\n                            font-size: 13px;\n                            padding: 0;\n                            margin: 0;\n                            line-height: 1.3;">\n                            <div style="font-size: 15px;\n                                font-weight: bold;\n                                margin: 0;\n                                padding: 0;\n                                line-height: 1;">\n                                '.concat(n.name||"Tanpa Nama",'\n                            </div><br>\n\n                            <table style="width: 100%; border-collapse: collapse; margin-bottom: 6px;">\n                                <tr>\n                                    <td style="color: #555;">Device</td>\n                                    <td style="text-align: right;">\n                                        <div style="display: flex; justify-content: flex-end; align-items: center; gap: 6px;">\n                                            <span>').concat(n.brand_name||"-",'</span>\n                                            <span style="\n                                                display: inline-block;\n                                                background-color: #ffc107;\n                                                color: #000;\n                                                font-size: 11px;\n                                                padding: 2px 6px;\n                                                border-radius: 6px;\n                                            ">\n                                                ').concat(n.device_id||"-",'\n                                            </span>\n                                        </div>\n                                    </td>\n                                </tr>\n                                <tr>\n                                    <td style="color: #555;">Koordinat</td>\n                                    <td style="text-align: right; padding-left: 8px;">\n                                        ').concat(parseFloat(n.latitude).toFixed(6),", ").concat(parseFloat(n.longitude).toFixed(6),'\n                                    </td>\n                                </tr>\n                                <tr>\n                                    <td style="color: #555;">Status</td>\n                                    <td style="text-align: right;">\n                                        <span style="\n                                            display: inline-block;\n                                            padding: 2px 6px;\n                                            font-size: 12px;\n                                            border-radius: 6px;\n                                            background-color: ').concat("online"===n.status?"#28a745":"#6c757d",';\n                                            color: white;\n                                        ">\n                                            ').concat("online"===n.status?"Online":"No Data",'\n                                        </span>\n                                    </td>\n                                </tr>\n                                <tr>\n                                    <td style="color: #555;">Elevasi</td>\n                                    <td style="text-align: right; font-weight: bold; font-size: 14px;">\n                                        ').concat(parseFloat(n.water_level_elevation||0).toFixed(1)," ").concat(n.unit_display,"\n                                    </td>\n                                </tr>\n                            </table>\n\n                            ").concat(l,'<br>\n\n                            <div style="display: flex; align-items: center; font-size: 12px; color: #555;">\n                                <i class="far fa-clock" style="margin-right: 6px;"></i>\n                                ').concat(moment(n.reading_at).locale("id").format("YYYY-MM-DD HH:mm:ss"),"\n                            </div>\n                        </div>\n                        "),a=new google.maps.InfoWindow({content:l}),e.addListener("click",function(){a.open(map,e)}),google.maps.event.addListener(a,"domready",function(){setTimeout(function(){var t=document.querySelector(".gm-style-iw");t&&(t.style.padding="0px",t.style.margin="0px",(t=t.parentElement)&&(t.style.padding="0px",t.style.margin="0px"),t=null==t?void 0:t.parentElement)&&(t.style.padding="0px",t.style.marginTop="0px"),(t=document.querySelector(".gm-style-iw-d"))&&(t.style.margin="0px",t.style.padding="0px")},50)}))}),setTimeout(adjustPadding,100))}).catch(function(t){console.log(t)})}function loadContentAwlrLastReading(t){null!=t.reading_at&&(n=moment(t.reading_at).format("YYYY-MM-DD HH:mm:ss"),n=moment().diff(n,"hours"),Math.abs(n));var n=0<t.water_level_elevation?"+":"",e="";switch(t.warning_status){case null:e="bg-nostatus";break;case"Normal":e="bg-normal";break;case"Waspada":e="bg-siaga3";break;case"Siaga":e="bg-siaga2";break;case"Awas":e="bg-siaga1"}var a,l=null!=t.water_level?" ".concat(t.water_level.toFixed(2)," <small>").concat(t.unit_display,"</small></h6>"):"-",n=(null!=t.water_level_elevation&&"".concat(n).concat(t.water_level_elevation," <sup>mdpl</sup>"),"cmdpl"!=t.unitSensor&&"mdpl"!=t.unitSensor||"".concat(t.water_level_elevation," <sup>mdpl</sup>"),null!=t.debit&&"".concat(t.debit," <small>m<sup>3</sup>/s</small>"),null!=t.siaga1&&null!=t.siaga2&&null!=t.siaga3?'\n            <div class="progress-meter mt-2 mb-2">\n                <div class="meter meter-normal meter-left" style="width: 25%;" title="Normal <br> < 6 m"><span class="fw-normal meter-text" style="color: #4DC27E;">0</span></div>\n                <div class="meter meter-waspada meter-left" style="width: 25%;" title="Siaga 3 <br> '.concat(t.siaga3," ").concat(t.unit_display," - ").concat(t.siaga2," ").concat(t.unit_display,'"><span class="fw-normal meter-text" style="color: #FFDA4F;">').concat(t.siaga3," ").concat(t.unit_display,'</span></div>\n                <div class="meter meter-siaga meter-left" style="width: 25%;" title="Siaga 2 <br> ').concat(t.siaga2," ").concat(t.unit_display," - ").concat(t.siaga1," ").concat(t.unit_display,'"><span class="fw-normal meter-text" style="color: #FFA600;">').concat(t.siaga2," ").concat(t.unit_display,'</span></div>\n                <div class="meter meter-awas meter-left" style="width: 25%;" title="Siaga 1 <br> > ').concat(t.siaga1," ").concat(t.unit_display,'"><span class="fw-normal meter-text" style="color: #EF5350;">').concat(t.siaga1," ").concat(t.unit_display,"</span></div>\n            </div>\n        "):'<div class="progress-meter mt-2 mb-2">\n            <div class="meter meter-normal meter-left" style="width: 25%;" title="Normal <br> < 6 m"><span class="fw-normal meter-text" style="color: #4DC27E;">0</span></div>\n            <div class="meter meter-waspada meter-left" style="width: 25%;" title="Siaga 3 <br> 0 - 0"><span class="fw-normal meter-text" style="color: #FFDA4F;">0</span></div>\n            <div class="meter meter-siaga meter-left" style="width: 25%;" title="Siaga 2 <br> 0 - 0"><span class="fw-normal meter-text" style="color: #FFA600;">0</span></div>\n            <div class="meter meter-awas meter-left" style="width: 25%;" title="Siaga 1 <br> > 0"><span class="fw-normal meter-text" style="color: #EF5350;">0</span></div>\n        </div>'),i=(null!=t.battery&&(t.battery<7?'<span><i class="mdi mdi-battery-charging-low ms-1" style="color: #F69696;"></i> ':'<span><i class="mdi mdi-battery-charging-high ms-1" style="color: #F69696;"></i> ').concat(t.battery," Volt</span>"),"");return null!=t.reading_at&&(a=moment().format("YYYY-MMM-DD"),i=moment(t.reading_at).locale("id").format("YYYY-MMM-DD")==a?'Hari Ini, <span class="text-muted">'.concat(moment(t.reading_at).format("HH:mm"),"</span>"):moment(t.reading_at).locale("id").format("D MMMM YYYY HH:mm")),'\n        <div class="card-header">\n            <div class="d-flex align-items-center">\n                <h6 class="card-title text-uppercase text-station-name m-0">'.concat(t.name,'</h6>\n                <span class="reading-at ms-auto">').concat(i,"</span>\n            </div>\n        </div>"),'<div class="card-station-awlr">\n        <div class="card shadow-sm border-0 rounded-4 overflow-hidden animate__animated animate__fadeInUp" style="background: #f8f9fa;">\n            <div class="card-body p-3">\n                <div class="d-flex justify-content-between align-items-center mb-2">\n                    <div class="d-flex flex-column">\n                        <strong class="fs-8">'.concat(t.name,'</strong>\n                        <span class="text-muted small">').concat(t.device_id,'</span> </div>\n                    <div class="text-end">\n                        <span class="badge ').concat(e,' text-white py-2 px-3">').concat(l,'</span>\n                    </div>\n                </div>\n \n                <div class="d-flex align-items-center text-muted small mb-3">\n                    <i class="far fa-clock me-1"></i>\n                    <span>').concat(null==t.reading_at?"":moment(t.reading_at).locale("id").format("YYYY-MM-DD HH:mm:ss"),'</span>\n                </div>\n\n                <div class="warning-bar-container mt-2">\n                    ').concat(n,"\n                </div>\n            </div>\n        </div>\n    </div>")}function loadArrLastReading(){getData("/Home/GetArrLastReading").then(function(t){var n;console.log("Respon API arr:",t),t&&200===(null==(n=t.metaData)?void 0:n.code)&&$.each(t.response,function(t,n){var e,a,l=loadContentArrLastReading(n);$("#card-station-".concat(n.id)).length?$("#card-station-".concat(n.id)).html(l):$("#arr-body").append('\n                        <div class="card-station-arr" data-ts-id="'.concat(n.id,'" id="card-station-').concat(n.id,'" data-last-update="').concat(null==n.reading_at?"":moment(n.reading_at).locale("id").format("YYYY-MM-DD HH:mm:ss"),'">\n                            ').concat(l,"\n                        </div>\n                    ")),null!=n.latitude&&null!=n.longitude&&(e=new google.maps.Marker({position:{lat:parseFloat(n.latitude),lng:parseFloat(n.longitude)},map:map,title:n.name,icon:{url:"assets/img/arr-marker.png",scaledSize:new google.maps.Size(45,50),anchor:new google.maps.Point(16,32)}}),l='\n                        <div style="font-family: \'Arial\', sans-serif;\n                            max-width: 280px;\n                            font-size: 13px;\n                            padding: 0;\n                            margin: 0;\n                            line-height: 1.3;">\n                            <div style="font-size: 15px;\n                                font-weight: bold;\n                                margin: 0;\n                                padding: 0;\n                                line-height: 1;">\n                                '.concat(n.name||"Tanpa Nama",'\n                            </div><br>\n\n                            <table style="width: 100%; border-collapse: collapse; margin-bottom: 6px;">\n                                <tr>\n                                    <td style="color: #555;">Device</td>\n                                    <td style="text-align: right;">\n                                        <div style="display: flex; justify-content: flex-end; align-items: center; gap: 6px;">\n                                            <span>').concat(n.brand_name||"-",'</span>\n                                            <span style="\n                                                display: inline-block;\n                                                background-color: #ffc107;\n                                                color: #000;\n                                                font-size: 11px;\n                                                padding: 2px 6px;\n                                                border-radius: 6px;\n                                            ">\n                                                ').concat(n.device_id||"-",'\n                                            </span>\n                                        </div>\n                                    </td>\n                                </tr>\n                                <tr>\n                                    <td style="color: #555;">Koordinat</td>\n                                    <td style="text-align: right; padding-left: 8px;">\n                                        ').concat(parseFloat(n.latitude).toFixed(6),", ").concat(parseFloat(n.longitude).toFixed(6),'\n                                    </td>\n                                </tr>\n                                <tr>\n                                    <td style="color: #555;">Status</td>\n                                    <td style="text-align: right;">\n                                        <span style="\n                                            display: inline-block;\n                                            padding: 2px 6px;\n                                            font-size: 12px;\n                                            border-radius: 6px;\n                                            background-color: ').concat("online"===n.status?"#28a745":"#6c757d",';\n                                            color: white;\n                                        ">\n                                            ').concat("online"===n.status?"Online":"No Data",'\n                                        </span>\n                                    </td>\n                                </tr>\n                                <tr>\n                                    <td style="color: #555;">Curah Hujan</td>\n                                    <td style="text-align: right; font-weight: bold; font-size: 14px;">\n                                        ').concat(parseFloat(n.rainfall||0).toFixed(1),' mm\n                                    </td>\n                                </tr>\n                            </table>\n\n                            <div style="display: flex; align-items: center; font-size: 12px; color: #555;">\n                                <i class="far fa-clock" style="margin-right: 6px;"></i>\n                                ').concat(moment(n.reading_at).locale("id").format("YYYY-MM-DD HH:mm:ss"),"\n                            </div>\n                        </div>"),a=new google.maps.InfoWindow({content:l}),e.addListener("click",function(){a.open(map,e)}),google.maps.event.addListener(a,"domready",function(){setTimeout(function(){var t=document.querySelector(".gm-style-iw");t&&(t.style.padding="0px",t.style.margin="0px",(t=t.parentElement)&&(t.style.padding="0px",t.style.margin="0px"),t=null==t?void 0:t.parentElement)&&(t.style.padding="0px",t.style.marginTop="0px"),(t=document.querySelector(".gm-style-iw-d"))&&(t.style.margin="0px",t.style.padding="0px")},50)}))})}).catch(function(t){console.log(t)})}function loadContentArrLastReading(t){var n=!1,e=(null!=t.reading_at&&(e=moment(t.reading_at).format("YYYY-MM-DD HH:mm:ss"),e=moment().diff(e,"hours"),Math.abs(e)<12)&&(n=!0),""),a=(null!=t.intensity_last_hour&&(e=t.intensity_last_hour),""),n=("Tidak Ada Hujan"!=t.intensity_last_hour&&n&&(a="blinking-content"),null!=t.rainfall_last_hour?" ".concat(t.rainfall_last_hour.toFixed(2)," <small>mm</small></h6>"):"-"),a=(null!=t.rainfall_last_hour&&null!=t.intensity_last_hour&&'\n            <div class="d-flex justify-content-around align-items-center reading-text mb-1">\n                <div class="col-4 text-center">\n                    <h4 class="text-range-hour">'.concat(moment(t.reading_at).locale("id").format("HH:mm"),'</h4>\n                </div>\n                <div class="col-4 text-center">\n                    <h4>').concat(t.rainfall_last_hour.toFixed(2),' <sup>mm</sup></h4>\n                </div>\n                <div class="col-4 col-intensity text-center">\n                    <img class="').concat(a,'" src="/images/arr/').concat(getIntensityIcon(t.intensity_last_hour),'" alt="').concat(t.intensity_last_hour,'">\n                </div>\n            </div>\n            <div class="d-flex justify-content-around reading-text">\n                <div class="col-4 text-center">\n                    Waktu\n                </div>\n                <div class="col-4 text-center">\n                    Curah Hujan\n                </div>\n                <div class="col-4 text-center fst-italic">\n                    ').concat(e,"\n                </div>\n            </div>\n        "),null!=t.battery&&(t.battery<7?'<span><small class="mdi mdi-battery-charging-low ms-1" style="color: #F69696;"></small> ':'<span><small class="mdi mdi-battery-charging-high ms-1" style="color: #F69696;"></small> ').concat(t.battery," Volt</span>"),"");return null!=t.reading_at&&(e=moment().format("YYYY-MMM-DD"),a=moment(t.reading_at).locale("id").format("YYYY-MMM-DD")==e?"Hari Ini":moment(t.reading_at).locale("id").locale("id").format("D MMMM YYYY")),'\n        <div class="card-header">\n            <div class="d-flex align-items-center">\n                <h6 class="card-title text-uppercase text-station-name m-0">'.concat(t.name,'</h6>\n                <span class="reading-at ms-auto">').concat(a,"</span>\n            </div>\n        </div>"),'<div class="card-station-arr">\n        <div class="card shadow-sm border-0 rounded-4 overflow-hidden animate__animated animate__fadeInUp" style="background: #f8f9fa;">\n            <div class="card-body p-3">\n                <div class="d-flex justify-content-between align-items-center mb-2">\n                    <div class="d-flex flex-column">\n                        <strong class="fs-8">'.concat(t.name,'</strong>\n                        <span class="text-muted small">').concat(t.device_id,'</span> </div>\n                    <div class="text-end">\n                        <span class="badge bg-normal text-white py-2 px-3">').concat(n,'</span>\n                    </div>\n                </div>\n \n                <div class="d-flex align-items-center text-muted small mb-3">\n                    <i class="far fa-clock me-1"></i>\n                    <span>').concat(null==t.reading_at?"":moment(t.reading_at).locale("id").format("YYYY-MM-DD HH:mm:ss"),"</span>\n                </div>\n            </div>\n        </div>\n    </div>")}function loadAwlrArrLastReading(){getData("/Home/GetAwlrArrLastReading").then(function(t){var n;console.log("Respon API arr:",t),t&&200===(null==(n=t.metaData)?void 0:n.code)&&$.each(t.response,function(t,n){var e=loadContentAwlrArrLastReading(n);$("#card-station-".concat(n.id)).length?$("#card-station-".concat(n.id)).html(e):$("#awlr-arr-body").append('\n                        <div class="card-station-awlr" data-ts-id="'.concat(n.id,'" id="card-station-').concat(n.id,'" data-last-update="').concat(null==n.reading_at?"":moment(n.reading_at).locale("id").format("YYYY-MM-DD HH:mm:ss"),'">\n                            ').concat(e,"\n                        </div>\n                    ")),null!=n.latitude&&n.longitude})}).catch(function(t){console.log(t)})}function loadContentAwlrArrLastReading(t){var n=!1,e=(null!=t.reading_at&&(e=moment(t.reading_at).format("YYYY-MM-DD HH:mm:ss"),e=moment().diff(e,"hours"),Math.abs(e)<12)&&(n=!0),0<t.water_level_elevation?"+":""),a="";switch(t.warning_status){case null:a="bg-nostatus";break;case"Normal":a="bg-normal";break;case"Waspada":a="bg-siaga3";break;case"Siaga":a="bg-siaga2";break;case"Awas":a="bg-siaga1"}var l=null!=t.water_level?" ".concat(t.water_level.toFixed(2)," <small>").concat(t.unit_display,"</small></h6>"):"-",e=(null!=t.water_level_elevation&&"".concat(e).concat(t.water_level_elevation," <sup>mdpl</sup>"),"cmdpl"!=t.unitSensor&&"mdpl"!=t.unitSensor||"".concat(t.water_level_elevation," <sup>mdpl</sup>"),null!=t.debit&&"".concat(t.debit," <small>m<sup>3</sup>/s</small>"),null!=t.rainfall_last_hour?" ".concat(t.rainfall_last_hour.toFixed(2)," <small>mm</small></h6>"):"-"),i=null!=t.siaga1&&null!=t.siaga2&&null!=t.siaga3?'\n            <div class="progress-meter mt-2 mb-2">\n                <div class="meter meter-normal meter-left" style="width: 25%;" title="Normal <br> < 6 m"><span class="fw-normal meter-text" style="color: #4DC27E;">0</span></div>\n                <div class="meter meter-waspada meter-left" style="width: 25%;" title="Siaga 3 <br> '.concat(t.siaga3," ").concat(t.unit_display," - ").concat(t.siaga2," ").concat(t.unit_display,'"><span class="fw-normal meter-text" style="color: #FFDA4F;">').concat(t.siaga3," ").concat(t.unit_display,'</span></div>\n                <div class="meter meter-siaga meter-left" style="width: 25%;" title="Siaga 2 <br> ').concat(t.siaga2," ").concat(t.unit_display," - ").concat(t.siaga1," ").concat(t.unit_display,'"><span class="fw-normal meter-text" style="color: #FFA600;">').concat(t.siaga2," ").concat(t.unit_display,'</span></div>\n                <div class="meter meter-awas meter-left" style="width: 25%;" title="Siaga 1 <br> > ').concat(t.siaga1," ").concat(t.unit_display,'"><span class="fw-normal meter-text" style="color: #EF5350;">').concat(t.siaga1," ").concat(t.unit_display,"</span></div>\n            </div>\n        "):'<div class="progress-meter mt-2 mb-2">\n            <div class="meter meter-normal meter-left" style="width: 25%;" title="Normal <br> < 6 m"><span class="fw-normal meter-text" style="color: #4DC27E;">0</span></div>\n            <div class="meter meter-waspada meter-left" style="width: 25%;" title="Siaga 3 <br> 0 - 0"><span class="fw-normal meter-text" style="color: #FFDA4F;">0</span></div>\n            <div class="meter meter-siaga meter-left" style="width: 25%;" title="Siaga 2 <br> 0 - 0"><span class="fw-normal meter-text" style="color: #FFA600;">0</span></div>\n            <div class="meter meter-awas meter-left" style="width: 25%;" title="Siaga 1 <br> > 0"><span class="fw-normal meter-text" style="color: #EF5350;">0</span></div>\n        </div>',s="-",r=(null!=t.battery&&(s="<h4>".concat(t.battery," <small>Volt</small><h4>")),""),o=(null!=t.reading_at&&(o=moment().format("YYYY-MMM-DD"),r=moment(t.reading_at).locale("id").format("YYYY-MMM-DD")==o?'Hari Ini, <span class="text-muted">'.concat(moment(t.reading_at).format("HH:mm"),"</span>"):moment(t.reading_at).locale("id").format("D MMMM YYYY HH:mm")),'\n        <div class="d-flex justify-content-around align-items-center reading-text">\n            <div class="col-4 text-center">\n                -\n            </div>\n            <div class="col-4 text-center">\n                -\n            </div>\n            <div class="col-4 text-center">\n                '.concat(s,'\n            </div>\n        </div>\n        <div class="d-flex justify-content-around reading-text">\n            <div class="col-4 text-center">\n                Curah Hujan\n            </div>\n            <div class="col-4 text-center">\n                Intensitas\n            </div>\n            <div class="col-4 text-center">\n                Battery\n            </div>\n        </div>\n    '),""),c=(null!=t.intensity_last_hour&&(o=t.intensity_last_hour),"");return"Tidak Ada Hujan"!=t.intensity_last_hour&&n&&(c="blinking-content"),null!=t.rainfall_last_hour&&null!=t.intensity_last_hour&&'\n            <div class="d-flex justify-content-around align-items-center reading-text mb-1">\n                <div class="col-4 text-center">\n                    '.concat(s,'\n                </div>\n                <div class="col-4 text-center">\n                    <h4>').concat(t.rainfall_last_hour.toFixed(2),' <small>mm</small></h4>\n                </div>\n                <div class="col-4 col-intensity text-center">\n                    <img class="').concat(c,'" src="/images/arr/').concat(getIntensityIcon(t.intensity_last_hour),'" alt="').concat(t.intensity_last_hour,'">\n                </div>\n            </div>\n            <div class="d-flex justify-content-around reading-text">\n                <div class="col-4 text-center text-uppercase">\n                    Battery\n                </div>\n                <div class="col-4 text-center text-uppercase">\n                    Curah Hujan\n                </div>\n                <div class="col-4 text-center fst-italic">\n                    ').concat(o,"\n                </div>\n            </div>\n        "),'\n        <div class="card-header">\n            <div class="d-flex align-items-center">\n                <h4 class="card-title text-uppercase text-station-name m-0">'.concat(t.name,'</h4>\n                <span class="reading-at ms-auto">').concat(r,"</span>\n            </div>\n        </div>\n    "),'<div class="card-station-awlr">\n        <div class="card shadow-sm border-0 rounded-4 overflow-hidden animate__animated animate__fadeInUp" style="background: #f8f9fa;">\n            <div class="card-body p-3">\n                <div class="d-flex justify-content-between align-items-center mb-2">\n                    <div class="d-flex flex-column">\n                        <strong class="fs-8">'.concat(t.name,'</strong>\n                        <span class="text-muted small">').concat(t.device_id,'</span> </div>\n                    <div class="text-end d-flex flex-column align-items-end">\n                        <span class="badge ').concat(a,' text-white py-2 px-3" style="margin-bottom: 0.5rem;">').concat(l,'</span>\n                        <span class="badge bg-normal text-white py-2 px-3">').concat(e,'</span>\n                    </div>\n                </div>\n \n                <div class="d-flex align-items-center text-muted small mb-3">\n                    <i class="far fa-clock me-1"></i>\n                    <span>').concat(null==t.reading_at?"":moment(t.reading_at).locale("id").format("YYYY-MM-DD HH:mm:ss"),'</span>\n                </div>\n\n                <div class="warning-bar-container mt-2">\n                    ').concat(i,"\n                </div>\n            </div>\n        </div>\n    </div>")}function loadDeviceOffline(){getData("/Home/GetSensorOffline").then(function(t){var n;t&&200===(null==(n=t.metaData)?void 0:n.code)&&$.each(t.response,function(t,n){var e=loadContentSensorOffline(n);$("#card-offline-".concat(n.id)).length?$("#card-offline-".concat(n.id)).html(e):$("#sensorList").append('\n                        <div class="card-offline-device" data-ts-id="'.concat(n.id,'" id="card-offline-').concat(n.id,'" data-last-update="').concat(null==n.reading_at?"":moment(n.reading_at).locale("id").format("YYYY-MM-DD HH:mm:ss"),'">\n                            ').concat(e,"\n                        </div>\n                    "))})}).catch(function(t){console.log(t)})}function loadContentSensorOffline(t){return'\n        <div class="card shadow-sm border-0 rounded-4 overflow-hidden animate__animated animate__fadeInUp" style="background: #f8f9fa;">\n            <div class="card-body p-3">\n                <div class="d-flex justify-content-between align-items-center mb-2">\n                    <div class="d-flex flex-column">\n                        <strong class="fs-8">'.concat(t.name,'</strong>\n                        <span class="text-muted small">').concat(t.device_id,'</span> \n                    </div>\n                </div>\n                <div class="d-flex align-items-center text-muted small mb-3">\n                    <i class="far fa-clock me-1"></i>\n                    <span>').concat(null==t.reading_at?"":moment(t.reading_at).locale("id").format("YYYY-MM-DD HH:mm:ss"),"</span>\n                </div>\n            </div>\n        </div>\n    ")}function fetchSensorOfflineCount(){return _fetchSensorOfflineCount.apply(this,arguments)}function _fetchSensorOfflineCount(){return(_fetchSensorOfflineCount=_asyncToGenerator(_regenerator().m(function t(){var n,e;return _regenerator().w(function(t){for(;;)switch(t.n){case 0:return t.p=0,t.n=1,fetch("/Home/GetSensorOfflineCount");case 1:return n=t.v,t.n=2,n.json();case 2:n=t.v,e=null!=(e=null==n?void 0:n.jumlah)?e:0,document.getElementById("sensorCount").textContent=e,t.n=4;break;case 3:t.p=3,e=t.v,console.error("Gagal mengambil data sensor offline:",e);case 4:return t.a(2)}},t,null,[[0,3]])}))).apply(this,arguments)}function getData(t){return fetch(t).then(function(t){if(t.ok)return t.json();throw new Error("Network response was not ok")})}function adjustPadding(){var t=document.querySelectorAll(".footer"),e=document.querySelectorAll(".tab-pane");t.forEach(function(t,n){n=e[n],t&&n&&(t=t.offsetHeight,n.style.paddingBottom="".concat(t,"px"))})}function getIntensityIcon(t){var n=moment(),e=(n.locale("id"),n.tz("Asia/Jakarta"),5<=(n=n.hours())&&n<10?"pagi":10<=n&&n<17?"siang":17<=n&&n<19?"sore":"malam"),a="berawan.png";switch(t){case"Berawan":a="berawan-".concat(e,".png");break;case"Hujan Ringan":a="hujan-ringan.png";break;case"Hujan Sedang":a="hujan-sedang.png";break;case"Hujan Lebat":a="hujan-lebat.png";break;case"Hujan Sangat Lebat":a="hujan-sangat-lebat.png"}return a}$(document).ready(function(){loadAwlrLastReading(),loadArrLastReading(),loadAwlrArrLastReading(),loadDeviceOffline(),fetchSensorOfflineCount()});