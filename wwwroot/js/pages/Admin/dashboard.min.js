function _regenerator(){var y,e="function"==typeof Symbol?Symbol:{},t=e.iterator||"@@iterator",n=e.toStringTag||"@@toStringTag";function r(e,t,n,r){var o,a,i,l,s,u,c,f,p,t=t&&t.prototype instanceof m?t:m,t=Object.create(t.prototype);return _regeneratorDefine2(t,"_invoke",(o=e,a=n,c=r||[],f=!1,p={p:u=0,n:0,v:y,a:g,f:g.bind(y,4),d:function(e,t){return i=e,l=0,s=y,p.n=t,d}},function(e,t,n){if(1<u)throw TypeError("Generator is already running");for(f&&1===t&&g(t,n),l=t,s=n;(h=l<2?y:s)||!f;){i||(l?l<3?(1<l&&(p.n=-1),g(l,s)):p.n=s:p.v=s);try{if(u=2,i){if(h=i[e=l?e:"next"]){if(!(h=h.call(i,s)))throw TypeError("iterator result is not an object");if(!h.done)return h;s=h.value,l<2&&(l=0)}else 1===l&&(h=i.return)&&h.call(i),l<2&&(s=TypeError("The iterator does not provide a '"+e+"' method"),l=1);i=y}else if((h=(f=p.n<0)?s:o.call(a,p))!==d)break}catch(e){i=y,l=1,s=e}finally{u=1}}return{value:h,done:f}}),!0),t;function g(e,t){for(l=e,s=t,h=0;!f&&u&&!n&&h<c.length;h++){var n,r=c[h],o=p.p,a=r[2];3<e?(n=a===t)&&(s=r[(l=r[4])?5:l=3],r[4]=r[5]=y):r[0]<=o&&((n=e<2&&o<r[1])?(l=0,p.v=t,p.n=r[1]):o<a&&(n=e<3||r[0]>t||a<t)&&(r[4]=e,r[5]=t,p.n=a,l=0))}if(n||1<e)return d;throw f=!0,t}}var d={};function m(){}function o(){}function a(){}var h=Object.getPrototypeOf,e=[][t]?h(h([][t]())):(_regeneratorDefine2(h={},t,function(){return this}),h),i=a.prototype=m.prototype=Object.create(e);function l(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,a):(e.__proto__=a,_regeneratorDefine2(e,n,"GeneratorFunction")),e.prototype=Object.create(i),e}return _regeneratorDefine2(i,"constructor",o.prototype=a),_regeneratorDefine2(a,"constructor",o),_regeneratorDefine2(a,n,o.displayName="GeneratorFunction"),_regeneratorDefine2(i),_regeneratorDefine2(i,n,"Generator"),_regeneratorDefine2(i,t,function(){return this}),_regeneratorDefine2(i,"toString",function(){return"[object Generator]"}),(_regenerator=function(){return{w:r,m:l}})()}function _regeneratorDefine2(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}(_regeneratorDefine2=function(e,t,n,r){t?o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:((r=function(t,n){_regeneratorDefine2(e,t,function(e){return this._invoke(t,n,e)})})("next",0),r("throw",1),r("return",2))})(e,t,n,r)}function asyncGeneratorStep(e,t,n,r,o,a,i){try{var l=e[a](i),s=l.value}catch(e){return void n(e)}l.done?t(s):Promise.resolve(s).then(r,o)}function _asyncToGenerator(l){return function(){var e=this,i=arguments;return new Promise(function(t,n){var r=l.apply(e,i);function o(e){asyncGeneratorStep(r,t,n,o,a,"next",e)}function a(e){asyncGeneratorStep(r,t,n,o,a,"throw",e)}o(void 0)})}}function _createForOfIteratorHelper(e,t){var n,r,o,a,i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(i)return o=!(r=!0),{s:function(){i=i.call(e)},n:function(){var e=i.next();return r=e.done,e},e:function(e){o=!0,n=e},f:function(){try{r||null==i.return||i.return()}finally{if(o)throw n}}};if(Array.isArray(e)||(i=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length)return i&&(e=i),a=0,{s:t=function(){},n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){var n;if(e)return"string"==typeof e?_arrayLikeToArray(e,t):"Map"===(n="Object"===(n={}.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var map;function initMap(){var e={lat:.1,lng:111};function t(e,t){fetch(e).then(function(e){return e.json()}).then(function(e){e.features.forEach(function(e){e.properties||(e.properties={}),e.properties.fillColor=t}),map.data.addGeoJson(e)})}map=new google.maps.Map(document.getElementById("map"),{zoom:8,center:e,gestureHandling:"greedy",mapTypeId:google.maps.MapTypeId.ROADMAP,mapTypeControlOptions:{style:google.maps.MapTypeControlStyle.HORIZONTAL_BAR,position:google.maps.ControlPosition.BOTTOM_LEFT},styles:[{featureType:"administrative.locality",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"administrative.neighborhood",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"poi",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"road",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"transit",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"administrative.province",elementType:"labels",stylers:[{visibility:"on"}]}]}),t("/data/das_kapuas.json","green"),t("/data/das_ws_pawan.json","#ffc829"),t("/data/das_ws_sambas.json","red"),map.data.setStyle(function(e){return{fillColor:e.getProperty("fillColor")||"gray",fillOpacity:.3,strokeColor:"white",strokeWeight:.7}}),map.data.addListener("click",function(e){var t=e.feature.getProperty("name");new google.maps.InfoWindow({content:"<strong>".concat(t,"</strong>"),position:e.latLng}).open(map)}),(new google.maps.Geocoder).geocode({location:e},function(e,t){if("OK"===t&&e[0]){var n,r="",o=_createForOfIteratorHelper(e[0].address_components);try{for(o.s();!(n=o.n()).done;){var a=n.value;if(a.types.includes("administrative_area_level_1")){r=a.long_name;break}}}catch(e){o.e(e)}finally{o.f()}new google.maps.InfoWindow({content:"<strong>".concat(r,"</strong>")}).open(map)}})}function loadAwlrLastReading(){getData("/Home/GetAwlrLastReading").then(function(e){var t;console.log("Respon API:",e),e&&200===(null==(t=e.metaData)?void 0:t.code)&&$.each(e.response,function(e,t){null!=t.latitude&&null!=t.longitude&&new google.maps.Marker({position:{lat:parseFloat(t.latitude),lng:parseFloat(t.longitude)},map:map,title:t.name,icon:{url:"assets/img/awlr-marker.png",scaledSize:new google.maps.Size(35,50),anchor:new google.maps.Point(16,32)}})})}).catch(function(e){console.log(e)})}function loadArrLastReading(){getData("/Home/GetArrLastReading").then(function(e){var t;console.log("Respon API arr:",e),e&&200===(null==(t=e.metaData)?void 0:t.code)&&$.each(e.response,function(e,t){null!=t.latitude&&null!=t.longitude&&new google.maps.Marker({position:{lat:parseFloat(t.latitude),lng:parseFloat(t.longitude)},map:map,title:t.name,icon:{url:"assets/img/arr-marker.png",scaledSize:new google.maps.Size(45,50),anchor:new google.maps.Point(16,32)}})})}).catch(function(e){console.log(e)})}function fetchSensorOfflineCount(){return _fetchSensorOfflineCount.apply(this,arguments)}function _fetchSensorOfflineCount(){return(_fetchSensorOfflineCount=_asyncToGenerator(_regenerator().m(function e(){var t,n;return _regenerator().w(function(e){for(;;)switch(e.n){case 0:return e.p=0,e.n=1,fetch("/Home/GetSensorOfflineCount");case 1:return t=e.v,e.n=2,t.json();case 2:t=e.v,n=null!=(n=null==t?void 0:t.jumlah)?n:0,document.getElementById("total-offline").textContent=n,e.n=4;break;case 3:e.p=3,n=e.v,console.error("Gagal mengambil data sensor offline:",n);case 4:return e.a(2)}},e,null,[[0,3]])}))).apply(this,arguments)}function fetchSensorCount(){return _fetchSensorCount.apply(this,arguments)}function _fetchSensorCount(){return(_fetchSensorCount=_asyncToGenerator(_regenerator().m(function e(){var t,n,r,o;return _regenerator().w(function(e){for(;;)switch(e.n){case 0:return e.p=0,e.n=1,fetch("/Home/GetSensorCount");case 1:return t=e.v,e.n=2,t.json();case 2:t=e.v,o=null!=(o=null==t?void 0:t.awlr)?o:0,n=null!=(n=null==t?void 0:t.arr)?n:0,r=null!=(r=null==t?void 0:t.awlr_arr)?r:0,document.getElementById("total-awlr").textContent=o,document.getElementById("total-arr").textContent=n,document.getElementById("total-awlr-arr").textContent=r,e.n=4;break;case 3:e.p=3,o=e.v,console.error("Gagal mengambil data sensor offline:",o);case 4:return e.a(2)}},e,null,[[0,3]])}))).apply(this,arguments)}function getData(e){return fetch(e).then(function(e){if(e.ok)return e.json();throw new Error("Network response was not ok")})}$(document).ready(function(){fetchSensorOfflineCount(),fetchSensorCount(),loadAwlrLastReading(),loadArrLastReading()});